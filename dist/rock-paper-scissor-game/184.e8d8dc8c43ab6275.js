"use strict";var Ru=Object.defineProperty,Gu=Object.defineProperties,Lu=Object.getOwnPropertyDescriptors,As=Object.getOwnPropertySymbols,Ou=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,ws=(oe,U,L)=>U in oe?Ru(oe,U,{enumerable:!0,configurable:!0,writable:!0,value:L}):oe[U]=L,$=(oe,U)=>{for(var L in U||(U={}))Ou.call(U,L)&&ws(oe,L,U[L]);if(As)for(var L of As(U))Bu.call(U,L)&&ws(oe,L,U[L]);return oe},Z=(oe,U)=>Gu(oe,Lu(U));(self.webpackChunkRockPaperScissorGame=self.webpackChunkRockPaperScissorGame||[]).push([[184],{4184:(oe,U,L)=>{L.r(U),L.d(U,{GameModule:()=>Fu});var K=L(9808),l=L(5e3),_s=L(1135),bs=L(8306),Hn=L(6451),Ht=L(7579);function Nn(e){for(let n in e){let t=e[n]||"";switch(n){case"display":e.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+n]=t;break;case"flex-direction":t=t||"row",e["-webkit-flex-direction"]=t,e["flex-direction"]=t;break;case"order":e.order=e["-webkit-"+n]=isNaN(+t)?"0":t}}return e}const Nt="inline",mt=["row","column","row-reverse","column-reverse"];function zn(e){let[n,t,i]=qn(e);return function Ss(e,n=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":n||null}}(n,t,i)}function qn(e){var n;e=null!==(n=null==e?void 0:e.toLowerCase())&&void 0!==n?n:"";let[t,i,s]=e.split(" ");return mt.find(r=>r===t)||(t=mt[0]),i===Nt&&(i=s!==Nt?s:"",s=Nt),[t,Cs(i),!!s]}function Ue(e){let[n]=qn(e);return n.indexOf("row")>-1}function Cs(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}function ce(e,...n){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(let t of n)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var zt=L(9300),Ds=L(8505);const Ms={provide:l.tb,useFactory:function Fs(e,n){return()=>{if((0,K.NF)(n)){const t=Array.from(e.querySelectorAll(`[class*=${Un}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(s=>{s.classList.contains(`${Un}ssr`)&&s.parentNode?s.parentNode.removeChild(s):s.className.replace(i,"")})}}},deps:[K.K0,l.Lbi],multi:!0},Un="flex-layout-";let qt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({providers:[Ms]}),e})();class De{constructor(n=!1,t="all",i="",s="",r=0){this.matches=n,this.mediaQuery=t,this.mqAlias=i,this.suffix=s,this.priority=r,this.property=""}clone(){return new De(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Es=(()=>{class e{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,s){const r=this.stylesheet.get(t);r?r.set(i,s):this.stylesheet.set(t,new Map([[i,s]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const s=this.stylesheet.get(t);let r="";if(s){const o=s.get(i);("number"==typeof o||"string"==typeof o)&&(r=o+"")}return r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ut={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},ie=new l.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Ut}),ke=new l.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Qt=new l.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Qn(e,n){return e=e?e.clone():new De,n&&(e.mqAlias=n.alias,e.mediaQuery=n.mediaQuery,e.suffix=n.suffix,e.priority=n.priority),e}class j{constructor(){this.shouldCache=!0}sideEffect(n,t,i){}}let B=(()=>{class e{constructor(t,i,s,r){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=s,this.layoutConfig=r}applyStyleToElement(t,i,s=null){let r={};"string"==typeof i&&(r[i]=s,i=r),r=this.layoutConfig.disableVendorPrefixes?i:Nn(i),this._applyMultiValueStyleToElement(r,t)}applyStyleToElements(t,i=[]){const s=this.layoutConfig.disableVendorPrefixes?t:Nn(t);i.forEach(r=>{this._applyMultiValueStyleToElement(s,r)})}getFlowDirection(t){const i="flex-direction";let s=this.lookupStyle(t,i);return[s||"row",this.lookupInlineStyle(t,i)||(0,K.PM)(this._platformId)&&this._serverModuleLoaded?s:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){var s;return null!==(s=t.getAttribute(i))&&void 0!==s?s:""}lookupInlineStyle(t,i){return(0,K.NF)(this._platformId)?t.style.getPropertyValue(i):function Rs(e,n){var t;return null!==(t=Wn(e)[n])&&void 0!==t?t:""}(t,i)}lookupStyle(t,i,s=!1){let r="";return t&&((r=this.lookupInlineStyle(t,i))||((0,K.NF)(this._platformId)?s||(r=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(r=this._serverStylesheet.getStyleForElement(t,i)))),r?r.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(s=>{const r=t[s],o=Array.isArray(r)?r:[r];o.sort();for(let a of o)a=a?a+"":"",(0,K.NF)(this._platformId)||!this._serverModuleLoaded?(0,K.NF)(this._platformId)?i.style.setProperty(s,a):Gs(i,s,a):this._serverStylesheet.addStyleToElement(i,s,a)})}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(Es),l.LFG(ke),l.LFG(l.Lbi),l.LFG(ie))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Gs(e,n,t){n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=Wn(e);i[n]=null!=t?t:"",function Ls(e,n){let t="";for(const i in n)n[i]&&(t+=`${i}:${n[i]};`);e.setAttribute("style",t)}(e,i)}function Wn(e){const n={},t=e.getAttribute("style");if(t){const i=t.split(/;+/g);for(let s=0;s<i.length;s++){const r=i[s].trim();if(r.length>0){const o=r.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${r}`);n[r.substr(0,o).trim()]=r.substr(o+1).trim()}}}return n}function Qe(e,n){return(n&&n.priority||0)-(e&&e.priority||0)}function Os(e,n){return(e.priority||0)-(n.priority||0)}let Wt=(()=>{class e{constructor(t,i,s){this._zone=t,this._platformId=i,this._document=s,this.source=new _s.X(new De(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,s)=>{i.matches&&t.push(s)}),t}isActive(t){var i;const s=this.registry.get(t);return null!==(i=null==s?void 0:s.matches)&&void 0!==i?i:this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const s=this._observable$.pipe((0,zt.h)(o=>!i||t.indexOf(o.mediaQuery)>-1)),r=new bs.y(o=>{const a=this.registerQuery(t);if(a.length){const u=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(u)}o.complete()});return(0,Hn.T)(r,s)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],s=[];return function Bs(e,n){const t=e.filter(i=>!Zn[i]);if(t.length>0){const i=t.join(", ");try{const s=n.createElement("style");s.setAttribute("type","text/css"),s.styleSheet||s.appendChild(n.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),n.head.appendChild(s),t.forEach(r=>Zn[r]=s)}catch(s){console.error(s)}}}(i,this._document),i.forEach(r=>{const o=u=>{this._zone.run(()=>this.source.next(new De(u.matches,r)))};let a=this.registry.get(r);a||(a=this.buildMQL(r),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(r,a)),a.matches&&s.push(new De(!0,r))}),s}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function ks(e,n){return n&&window.matchMedia("all").addListener?window.matchMedia(e):{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,(0,K.NF)(this._platformId))}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(l.R0b),l.LFG(l.Lbi),l.LFG(K.K0))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Zn={},Is=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Xn="(orientation: portrait) and (max-width: 599.98px)",Jn="(orientation: landscape) and (max-width: 959.98px)",ei="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",ti="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",ni="(orientation: portrait) and (min-width: 840px)",ii="(orientation: landscape) and (min-width: 1280px)",de={HANDSET:`${Xn}, ${Jn}`,TABLET:`${ei} , ${ti}`,WEB:`${ni}, ${ii} `,HANDSET_PORTRAIT:`${Xn}`,TABLET_PORTRAIT:`${ei} `,WEB_PORTRAIT:`${ni}`,HANDSET_LANDSCAPE:`${Jn}`,TABLET_LANDSCAPE:`${ti}`,WEB_LANDSCAPE:`${ii}`},Ts=[{alias:"handset",priority:2e3,mediaQuery:de.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:de.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:de.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:de.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:de.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:de.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:de.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:de.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:de.WEB_PORTRAIT,overlapping:!0}],Ps=/(\.|-|_)/g;function Ks(e){let n=e.length>0?e.charAt(0):"",t=e.length>1?e.slice(1):"";return n.toUpperCase()+t}const $s=new l.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const e=(0,l.f3M)(Qt),n=(0,l.f3M)(ie),t=[].concat.apply([],(e||[]).map(s=>Array.isArray(s)?s:[s]));return function Vs(e,n=[]){const t={};return e.forEach(i=>{t[i.alias]=i}),n.forEach(i=>{t[i.alias]?ce(t[i.alias],i):t[i.alias]=i}),function js(e){return e.forEach(n=>{n.suffix||(n.suffix=function Ys(e){return e.replace(Ps,"|").split("|").map(Ks).join("")}(n.alias),n.overlapping=!!n.overlapping)}),e}(Object.keys(t).map(i=>t[i]))}((n.disableDefaultBps?[]:Is).concat(n.addOrientationBps?Ts:[]),t)}});let Zt=(()=>{class e{constructor(t){this.findByMap=new Map,this.items=[...t].sort(Os)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>{var i;return null!==(i=null==t?void 0:t.suffix)&&void 0!==i?i:""})}findWithPredicate(t,i){var s;let r=this.findByMap.get(t);return r||(r=null!==(s=this.items.find(i))&&void 0!==s?s:null,this.findByMap.set(t,r)),null!=r?r:null}}return e.\u0275fac=function(t){return new(t||e)(l.LFG($s))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ie="print",Hs={alias:Ie,mediaQuery:Ie,priority:1e3};let Ns=(()=>{class e{constructor(t,i,s){this.breakpoints=t,this.layoutConfig=i,this._document=s,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new zs,this.deactivations=[]}withPrintQuery(t){return[...t,Ie]}isPrintEvent(t){return t.mediaQuery.startsWith(Ie)}get printAlias(){var t;return[...null!==(t=this.layoutConfig.printWithBreakpoints)&&void 0!==t?t:[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Qe)}updateEvent(t){var i;let s=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(s=this.getEventBreakpoints(t)[0],t.mediaQuery=null!==(i=null==s?void 0:s.mediaQuery)&&void 0!==i?i:""),Qn(t,s)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new De(!0,Ie))),t.updateStyles())},s=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",s),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(s)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const s=this.breakpoints.findByQuery(i.mediaQuery);if(s){const r=this.formerActivations&&this.formerActivations.includes(s),o=!this.formerActivations&&t.activatedBreakpoints.includes(s);(r||o)&&(this.deactivations.push(s),this.deactivations.sort(Qe))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(Zt),l.LFG(ie),l.LFG(K.K0))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class zs{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(n){return n.push(Hs),n.sort(Qe),n.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(n){n&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===n.mediaQuery)&&(this.printBreakpoints=function qs(e){var n;return null!==(n=null==e?void 0:e.mediaQuery.startsWith(Ie))&&void 0!==n&&n}(n)?[n,...this.printBreakpoints]:[...this.printBreakpoints,n])}clear(){this.printBreakpoints=[]}}let I=(()=>{class e{constructor(t,i,s){this.matchMedia=t,this.breakpoints=i,this.hook=s,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Ht.x,this.observeActivations()}get activatedAlias(){var t,i;return null!==(i=null===(t=this.activatedBreakpoints[0])||void 0===t?void 0:t.alias)&&void 0!==i?i:""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=Qn(t,i);const s=this.activatedBreakpoints.indexOf(i);t.matches&&-1===s?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Qe),this.updateStyles()):!t.matches&&-1!==s&&(this._activatedBreakpoints.splice(s,1),this._activatedBreakpoints.sort(Qe),this.updateStyles())}}init(t,i,s,r,o=[]){si(this.updateMap,t,i,s),si(this.clearMap,t,i,r),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,s){const r=this.elementMap.get(t);if(r){const o=void 0!==s?r.get(s):this.getActivatedValues(r,i);if(o)return o.get(i)}}hasValue(t,i){const s=this.elementMap.get(t);if(s){const r=this.getActivatedValues(s,i);if(r)return void 0!==r.get(i)||!1}return!1}setValue(t,i,s,r){var o;let a=this.elementMap.get(t);if(a){const c=(null!==(o=a.get(r))&&void 0!==o?o:new Map).set(i,s);a.set(r,c),this.elementMap.set(t,a)}else a=(new Map).set(r,(new Map).set(i,s)),this.elementMap.set(t,a);const u=this.getValue(t,i);void 0!==u&&this.updateElement(t,i,u)}trackValue(t,i){return this.subject.asObservable().pipe((0,zt.h)(s=>s.element===t&&s.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const s=new Set(this.elementKeyMap.get(i));let r=this.getActivatedValues(t);r&&r.forEach((o,a)=>{this.updateElement(i,a,o),s.delete(a)}),s.forEach(o=>{if(r=this.getActivatedValues(t,o),r){const a=r.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const s=this.clearMap.get(t);if(s){const r=s.get(i);r&&(r(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,s){const r=this.updateMap.get(t);if(r){const o=r.get(i);o&&(o(s),this.subject.next({element:t,key:i,value:s}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(r=>r.unsubscribe()),this.watcherMap.delete(t));const s=this.elementMap.get(t);s&&(s.forEach((r,o)=>s.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const s=this.elementMap.get(t);if(s){const r=this.getActivatedValues(s,i);r&&(i?this.updateElement(t,i,r.get(i)):r.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let s=this.elementKeyMap.get(t);s||(s=new Set,this.elementKeyMap.set(t,s)),s.add(i)}watchExtraTriggers(t,i,s){if(s&&s.length){let r=this.watcherMap.get(t);if(r||(r=new Map,this.watcherMap.set(t,r)),!r.get(i)){const a=(0,Hn.T)(...s).subscribe(()=>{const u=this.getValue(t,i);this.updateElement(t,i,u)});r.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let r=0;r<this.activatedBreakpoints.length;r++){const a=t.get(this.activatedBreakpoints[r].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const s=t.get("");return void 0===i||s&&s.has(i)?s:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe((0,Ds.b)(this.hook.interceptEvents(this)),(0,zt.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(Wt),l.LFG(Zt),l.LFG(Ns))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function si(e,n,t,i){var s;if(void 0!==i){const r=null!==(s=e.get(n))&&void 0!==s?s:new Map;r.set(t,i),e.set(n,r)}}let Y=(()=>{class e{constructor(t,i,s,r){this.elementRef=t,this.styleBuilder=i,this.styler=s,this.marshal=r,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Ht.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const s=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,s)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const s=this.styleBuilder,r=s.shouldCache;let o=this.styleCache.get(t);(!o||!r)&&(o=s.buildStyles(t,i),r&&this.styleCache.set(t,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),s.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[s,r]=this.styler.getFlowDirection(t);if(!r&&i){const o=zn(s);this.styler.applyStyleToElements(o,[t])}return s.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,s=this.nativeElement){this.styler.applyStyleToElement(s,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.SBq),l.Y36(j),l.Y36(B),l.Y36(I))},e.\u0275dir=l.lG2({type:e,features:[l.TTD]}),e})();L(3191);var Te=L(2722);L(2313);let fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[qt]]}),e})();var Jt=L(226);let mr=(()=>{class e extends j{buildStyles(t,{display:i}){const s=zn(t);return Object.assign(Object.assign({},s),{display:"none"===i?i:s.display})}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=l.n5z(e)))(i||e)}}(),e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const yr=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let pr=(()=>{class e extends Y{constructor(t,i,s,r,o){super(t,s,i,r),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){var i;const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(i=mi.get(r))&&void 0!==i?i:new Map,mi.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.SBq),l.Y36(B),l.Y36(mr),l.Y36(I),l.Y36(ie))},e.\u0275dir=l.lG2({type:e,features:[l.qOj]}),e})(),hi=(()=>{class e extends pr{constructor(){super(...arguments),this.inputs=yr}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=l.n5z(e)))(i||e)}}(),e.\u0275dir=l.lG2({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[l.qOj]}),e})();const mi=new Map;let rl=(()=>{class e extends j{buildStyles(t,i){const s={},[r,o]=t.split(" ");switch(r){case"center":s["justify-content"]="center";break;case"space-around":s["justify-content"]="space-around";break;case"space-between":s["justify-content"]="space-between";break;case"space-evenly":s["justify-content"]="space-evenly";break;case"end":case"flex-end":s["justify-content"]="flex-end";break;default:s["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":s["align-items"]=s["align-content"]="flex-start";break;case"center":s["align-items"]=s["align-content"]="center";break;case"end":case"flex-end":s["align-items"]=s["align-content"]="flex-end";break;case"space-between":s["align-content"]="space-between",s["align-items"]="stretch";break;case"space-around":s["align-content"]="space-around",s["align-items"]="stretch";break;case"baseline":s["align-content"]="stretch",s["align-items"]="baseline";break;default:s["align-items"]=s["align-content"]="stretch"}return ce(s,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Ue(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Ue(i.layout)?"100%":null})}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=l.n5z(e)))(i||e)}}(),e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ll=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let ol=(()=>{class e extends Y{constructor(t,i,s,r){super(t,s,i,r),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe((0,Te.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",s=this.inline;"row"===i&&s?this.styleCache=gl:"row"!==i||s?"row-reverse"===i&&s?this.styleCache=hl:"row-reverse"!==i||s?"column"===i&&s?this.styleCache=fl:"column"!==i||s?"column-reverse"===i&&s?this.styleCache=ml:"column-reverse"===i&&!s&&(this.styleCache=dl):this.styleCache=ul:this.styleCache=cl:this.styleCache=al,this.addStyles(t,{layout:i,inline:s})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),mt.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.SBq),l.Y36(B),l.Y36(rl),l.Y36(I))},e.\u0275dir=l.lG2({type:e,features:[l.qOj]}),e})(),xi=(()=>{class e extends ol{constructor(){super(...arguments),this.inputs=ll}}return e.\u0275fac=function(){let n;return function(i){return(n||(n=l.n5z(e)))(i||e)}}(),e.\u0275dir=l.lG2({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[l.qOj]}),e})();const al=new Map,ul=new Map,cl=new Map,dl=new Map,gl=new Map,fl=new Map,hl=new Map,ml=new Map;let vi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[qt,Jt.vT]]}),e})(),Fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[qt]]}),e})(),Po=(()=>{class e{constructor(t,i){(0,K.PM)(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:e,providers:t.serverLoaded?[{provide:ie,useValue:Object.assign(Object.assign({},Ut),t)},{provide:Qt,useValue:i,multi:!0},{provide:ke,useValue:!0}]:[{provide:ie,useValue:Object.assign(Object.assign({},Ut),t)},{provide:Qt,useValue:i,multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(ke),l.LFG(l.Lbi))},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[vi,fi,Fi],vi,fi,Fi]}),e})();var Ko=L(536),xt=L(8744),Yo=L(4161),jo=L(4594),Mi=L(7423),Vo=L(8099);let $o=(()=>{class e{constructor(t){this.router=t,this.userName=localStorage.getItem("userName")||""}ngOnInit(){this.router.navigate(["./home/game"])}logout(){localStorage.clear(),this.router.navigate(["./auth"])}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(xt.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-home"]],decls:9,vars:1,consts:[["fullscreen",""],[1,"example-spacer"],["mat-icon-button","",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"mat-drawer-container",0),l.TgZ(1,"mat-toolbar"),l.TgZ(2,"span"),l._uU(3),l.qZA(),l._UZ(4,"span",1),l.TgZ(5,"button",2),l.NdJ("click",function(){return i.logout()}),l.TgZ(6,"mat-icon"),l._uU(7,"logout"),l.qZA(),l.qZA(),l.qZA(),l._UZ(8,"router-outlet"),l.qZA()),2&t&&(l.xp6(3),l.hij("Hi ",i.userName," "))},directives:[Yo.kh,jo.Ye,Mi.lW,Vo.Hw,xt.lC],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),e})();function Ei(e,n,t,i,s,r,o){try{var a=e[r](o),u=a.value}catch(c){return void t(c)}a.done?n(u):Promise.resolve(u).then(i,s)}function vt(e){return function(){var n=this,t=arguments;return new Promise(function(i,s){var r=e.apply(n,t);function o(u){Ei(r,i,s,o,a,"next",u)}function a(u){Ei(r,i,s,o,a,"throw",u)}o(void 0)})}}const k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,V=Object.keys,z=Array.isArray;function Q(e,n){return"object"!=typeof n||V(n).forEach(function(t){e[t]=n[t]}),e}"undefined"!=typeof Promise&&!k.Promise&&(k.Promise=Promise);const We=Object.getPrototypeOf,Ho={}.hasOwnProperty;function te(e,n){return Ho.call(e,n)}function Pe(e,n){"function"==typeof n&&(n=n(We(e))),("undefined"==typeof Reflect?V:Reflect.ownKeys)(n).forEach(t=>{ge(e,t,n[t])})}const Ri=Object.defineProperty;function ge(e,n,t,i){Ri(e,n,Q(t&&te(t,"get")&&"function"==typeof t.get?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},i))}function Ke(e){return{from:function(n){return e.prototype=Object.create(n.prototype),ge(e.prototype,"constructor",e),{extend:Pe.bind(null,e.prototype)}}}}const No=Object.getOwnPropertyDescriptor;function en(e,n){let i;return No(e,n)||(i=We(e))&&en(i,n)}const zo=[].slice;function At(e,n,t){return zo.call(e,n,t)}function Gi(e,n){return n(e)}function Ze(e){if(!e)throw new Error("Assertion Failed")}function Li(e){k.setImmediate?setImmediate(e):setTimeout(e,0)}function Oi(e,n){return e.reduce((t,i,s)=>{var r=n(i,s);return r&&(t[r[0]]=r[1]),t},{})}function fe(e,n){if(te(e,n))return e[n];if(!n)return e;if("string"!=typeof n){for(var t=[],i=0,s=n.length;i<s;++i){var r=fe(e,n[i]);t.push(r)}return t}var o=n.indexOf(".");if(-1!==o){var a=e[n.substr(0,o)];return void 0===a?void 0:fe(a,n.substr(o+1))}}function se(e,n,t){if(e&&void 0!==n&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof n&&"length"in n){Ze("string"!=typeof t&&"length"in t);for(var i=0,s=n.length;i<s;++i)se(e,n[i],t[i])}else{var r=n.indexOf(".");if(-1!==r){var o=n.substr(0,r),a=n.substr(r+1);if(""===a)void 0===t?z(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=t;else{var u=e[o];u||(u=e[o]={}),se(u,a,t)}}else void 0===t?z(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function Bi(e){var n={};for(var t in e)te(e,t)&&(n[t]=e[t]);return n}const Qo=[].concat;function ki(e){return Qo.apply([],e)}const Ii="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ki([8,16,32,64].map(e=>["Int","Uint","Float"].map(n=>n+e+"Array")))).filter(e=>k[e]),Wo=Ii.map(e=>k[e]);Oi(Ii,e=>[e,!0]);let Ae=null;function Xe(e){Ae="undefined"!=typeof WeakMap&&new WeakMap;const n=tn(e);return Ae=null,n}function tn(e){if(!e||"object"!=typeof e)return e;let n=Ae&&Ae.get(e);if(n)return n;if(z(e)){n=[],Ae&&Ae.set(e,n);for(var t=0,i=e.length;t<i;++t)n.push(tn(e[t]))}else if(Wo.indexOf(e.constructor)>=0)n=e;else{const r=We(e);for(var s in n=r===Object.prototype?{}:Object.create(r),Ae&&Ae.set(e,n),e)te(e,s)&&(n[s]=tn(e[s]))}return n}const{toString:Zo}={};function nn(e){return Zo.call(e).slice(8,-1)}const sn="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",Xo="symbol"==typeof sn?function(e){var n;return null!=e&&(n=e[sn])&&n.apply(e)}:function(){return null},Ye={};function he(e){var n,t,i,s;if(1===arguments.length){if(z(e))return e.slice();if(this===Ye&&"string"==typeof e)return[e];if(s=Xo(e)){for(t=[];!(i=s.next()).done;)t.push(i.value);return t}if(null==e)return[e];if("number"==typeof(n=e.length)){for(t=new Array(n);n--;)t[n]=e[n];return t}return[e]}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}const rn="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ti(e,n){ae=e,Pi=n}var Pi=()=>!0;const Jo=!new Error("").stack;function Fe(){if(Jo)try{throw new Error}catch(e){return e}return new Error}function ln(e,n){var t=e.stack;return t?(n=n||0,0===t.indexOf(e.name)&&(n+=(e.name+e.message).split("\n").length),t.split("\n").slice(n).filter(Pi).map(i=>"\n"+i).join("")):""}var Ki=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],on=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ki),ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function je(e,n){this._e=Fe(),this.name=e,this.message=n}function Yi(e,n){return e+". Errors: "+Object.keys(n).map(t=>n[t].toString()).filter((t,i,s)=>s.indexOf(t)===i).join("\n")}function wt(e,n,t,i){this._e=Fe(),this.failures=n,this.failedKeys=i,this.successCount=t,this.message=Yi(e,n)}function Je(e,n){this._e=Fe(),this.name="BulkError",this.failures=Object.keys(n).map(t=>n[t]),this.failuresByPos=n,this.message=Yi(e,n)}Ke(je).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ln(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Ke(wt).from(je),Ke(Je).from(je);var na=on.reduce((e,n)=>(e[n]=n+"Error",e),{});const ia=je;var F=on.reduce((e,n)=>{var t=n+"Error";function i(s,r){this._e=Fe(),this.name=t,s?"string"==typeof s?(this.message=`${s}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof s&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=ta[n]||t,this.inner=null)}return Ke(i).from(ia),e[n]=i,e},{});F.Syntax=SyntaxError,F.Type=TypeError,F.Range=RangeError;var ji=Ki.reduce((e,n)=>(e[n+"Error"]=F[n],e),{}),_t=on.reduce((e,n)=>(-1===["Syntax","Type","Range"].indexOf(n)&&(e[n+"Error"]=F[n]),e),{});function O(){}function et(e){return e}function ra(e,n){return null==e||e===et?n:function(t){return n(e(t))}}function Me(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function la(e,n){return e===O?n:function(){var t=e.apply(this,arguments);void 0!==t&&(arguments[0]=t);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var r=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Me(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Me(s,this.onerror):s),void 0!==r?r:t}}function oa(e,n){return e===O?n:function(){e.apply(this,arguments);var t=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Me(t,this.onsuccess):t),i&&(this.onerror=this.onerror?Me(i,this.onerror):i)}}function aa(e,n){return e===O?n:function(t){var i=e.apply(this,arguments);Q(t,i);var s=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var o=n.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Me(s,this.onsuccess):s),r&&(this.onerror=this.onerror?Me(r,this.onerror):r),void 0===i?void 0===o?void 0:o:Q(i,o)}}function ua(e,n){return e===O?n:function(){return!1!==n.apply(this,arguments)&&e.apply(this,arguments)}}function an(e,n){return e===O?n:function(){var t=e.apply(this,arguments);if(t&&"function"==typeof t.then){for(var i=this,s=arguments.length,r=new Array(s);s--;)r[s]=arguments[s];return t.then(function(){return n.apply(i,r)})}return n.apply(this,arguments)}}_t.ModifyError=wt,_t.DexieError=je,_t.BulkError=Je;var tt={};const[un,bt,cn]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,We(e),e];const n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,We(n),e]})(),$i=bt&&bt.then,Ct=un&&un.constructor,dn=!!cn;var gn=!1,ga=cn?()=>{cn.then(Mt)}:k.setImmediate?setImmediate.bind(null,Mt):k.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Mt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Mt,0)},nt=function(e,n){it.push([e,n]),St&&(ga(),St=!1)},fn=!0,St=!0,Ee=[],Dt=[],hn=null,mn=et,Ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ji,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Ji(e[0],e[1])}catch(n){}})}},S=Ve,it=[],Re=0,Ft=[];function _(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=O,this._lib=!1;var n=this._PSD=S;if(ae&&(this._stackHolder=Fe(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==tt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&pn(this,this._value))}this._state=null,this._value=null,++n.ref,Ni(this,e)}const yn={get:function(){var e=S,n=Gt;function t(i,s){var r=!e.global&&(e!==S||n!==Gt);const o=r&&!me();var a=new _((u,c)=>{xn(this,new Hi(Ot(i,e,r,o),Ot(s,e,r,o),u,c,e))});return ae&&Ui(a,this),a}return t.prototype=tt,t},set:function(e){ge(this,"then",e&&e.prototype===tt?yn:{get:function(){return e},set:yn.set})}};function Hi(e,n,t,i,s){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=i,this.psd=s}function Ni(e,n){try{n(t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&st();t&&"function"==typeof t.then?Ni(e,(s,r)=>{t instanceof _?t._then(s,r):t.then(s,r)}):(e._state=!0,e._value=t,zi(e)),i&&rt()}},pn.bind(null,e))}catch(t){pn(e,t)}}function pn(e,n){if(Dt.push(n),null===e._state){var t=e._lib&&st();n=mn(n),e._state=!1,e._value=n,ae&&null!==n&&"object"==typeof n&&!n._promise&&function qo(e,n,t){try{e.apply(null,t)}catch(i){n&&n(i)}}(()=>{var i=en(n,"stack");n._promise=e,ge(n,"stack",{get:()=>gn?i&&(i.get?i.get.apply(n):i.value):e.stack})}),function ma(e){Ee.some(n=>n._value===e._value)||Ee.push(e)}(e),zi(e),t&&rt()}}function zi(e){var n=e._listeners;e._listeners=[];for(var t=0,i=n.length;t<i;++t)xn(e,n[t]);var s=e._PSD;--s.ref||s.finalize(),0===Re&&(++Re,nt(()=>{0==--Re&&vn()},[]))}function xn(e,n){if(null!==e._state){var t=e._state?n.onFulfilled:n.onRejected;if(null===t)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++Re,nt(fa,[t,e,n])}else e._listeners.push(n)}function fa(e,n,t){try{hn=n;var i,s=n._value;n._state?i=e(s):(Dt.length&&(Dt=[]),i=e(s),-1===Dt.indexOf(s)&&function ya(e){for(var n=Ee.length;n;)if(Ee[--n]._value===e._value)return void Ee.splice(n,1)}(n)),t.resolve(i)}catch(r){t.reject(r)}finally{hn=null,0==--Re&&vn(),--t.psd.ref||t.psd.finalize()}}function qi(e,n,t){if(n.length===t)return n;var i="";if(!1===e._state){var r,o,s=e._value;null!=s?(r=s.name||"Error",o=s.message||s,i=ln(s,0)):(r=s,o=""),n.push(r+(o?": "+o:"")+i)}return ae&&((i=ln(e._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),e._prev&&qi(e._prev,n,t)),n}function Ui(e,n){var t=n?n._numPrev+1:0;t<100&&(e._prev=n,e._numPrev=t)}function Mt(){st()&&rt()}function st(){var e=fn;return fn=!1,St=!1,e}function rt(){var e,n,t;do{for(;it.length>0;)for(e=it,it=[],t=e.length,n=0;n<t;++n){var i=e[n];i[0].apply(null,i[1])}}while(it.length>0);fn=!0,St=!0}function vn(){var e=Ee;Ee=[],e.forEach(i=>{i._PSD.onunhandled.call(null,i._value,i)});for(var n=Ft.slice(0),t=n.length;t;)n[--t]()}function Et(e){return new _(tt,!1,e)}function T(e,n){var t=S;return function(){var i=st(),s=S;try{return _e(t,!0),e.apply(this,arguments)}catch(r){n&&n(r)}finally{_e(s,!1),i&&rt()}}}Pe(_.prototype,{then:yn,_then:function(e,n){xn(this,new Hi(null,null,e,n,S))},catch:function(e){if(1===arguments.length)return this.then(null,e);var n=arguments[0],t=arguments[1];return this.then(null,"function"==typeof n?i=>i instanceof n?t(i):Et(i):i=>i&&i.name===n?t(i):Et(i))},finally:function(e){return this.then(n=>(e(),n),n=>(e(),Et(n)))},stack:{get:function(){if(this._stack)return this._stack;try{gn=!0;var n=qi(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{gn=!1}}},timeout:function(e,n){return e<1/0?new _((t,i)=>{var s=setTimeout(()=>i(new F.Timeout(n)),e);this.then(t,i).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&ge(_.prototype,Symbol.toStringTag,"Dexie.Promise"),Ve.env=Qi(),Pe(_,{all:function(){var e=he.apply(null,arguments).map(Lt);return new _(function(n,t){0===e.length&&n([]);var i=e.length;e.forEach((s,r)=>_.resolve(s).then(o=>{e[r]=o,--i||n(e)},t))})},resolve:e=>{if(e instanceof _)return e;if(e&&"function"==typeof e.then)return new _((t,i)=>{e.then(t,i)});var n=new _(tt,!0,e);return Ui(n,hn),n},reject:Et,race:function(){var e=he.apply(null,arguments).map(Lt);return new _((n,t)=>{e.map(i=>_.resolve(i).then(n,t))})},PSD:{get:()=>S,set:e=>S=e},totalEchoes:{get:()=>Gt},newPSD:we,usePSD:He,scheduler:{get:()=>nt,set:e=>{nt=e}},rejectionMapper:{get:()=>mn,set:e=>{mn=e}},follow:(e,n)=>new _((t,i)=>we((s,r)=>{var o=S;o.unhandleds=[],o.onunhandled=r,o.finalize=Me(function(){!function ha(e){Ft.push(function n(){e(),Ft.splice(Ft.indexOf(n),1)}),++Re,nt(()=>{0==--Re&&vn()},[])}(()=>{0===this.unhandleds.length?s():r(this.unhandleds[0])})},o.finalize),e()},n,t,i))}),Ct&&(Ct.allSettled&&ge(_,"allSettled",function(){const e=he.apply(null,arguments).map(Lt);return new _(n=>{0===e.length&&n([]);let t=e.length;const i=new Array(t);e.forEach((s,r)=>_.resolve(s).then(o=>i[r]={status:"fulfilled",value:o},o=>i[r]={status:"rejected",reason:o}).then(()=>--t||n(i)))})}),Ct.any&&"undefined"!=typeof AggregateError&&ge(_,"any",function(){const e=he.apply(null,arguments).map(Lt);return new _((n,t)=>{0===e.length&&t(new AggregateError([]));let i=e.length;const s=new Array(i);e.forEach((r,o)=>_.resolve(r).then(a=>n(a),a=>{s[o]=a,--i||t(new AggregateError(s))}))})}));const q={awaits:0,echoes:0,id:0};var pa=0,Rt=[],An=0,Gt=0,xa=0;function we(e,n,t,i){var s=S,r=Object.create(s);r.parent=s,r.ref=0,r.global=!1,r.id=++xa;var o=Ve.env;r.env=dn?{Promise:_,PromiseProp:{value:_,configurable:!0,writable:!0},all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject,nthen:Zi(o.nthen,r),gthen:Zi(o.gthen,r)}:{},n&&Q(r,n),++s.ref,r.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=He(r,e,t,i);return 0===r.ref&&r.finalize(),a}function $e(){return q.id||(q.id=++pa),++q.awaits,q.echoes+=100,q.id}function me(){return!!q.awaits&&(0==--q.awaits&&(q.id=0),q.echoes=100*q.awaits,!0)}function Lt(e){return q.echoes&&e&&e.constructor===Ct?($e(),e.then(n=>(me(),n),n=>(me(),H(n)))):e}function va(e){++Gt,(!q.echoes||0==--q.echoes)&&(q.echoes=q.id=0),Rt.push(S),_e(e,!0)}function Aa(){var e=Rt[Rt.length-1];Rt.pop(),_e(e,!1)}function _e(e,n){var t=S;if((n?q.echoes&&(!An++||e!==S):An&&(!--An||e!==S))&&Wi(n?va.bind(null,e):Aa),e!==S&&(S=e,t===Ve&&(Ve.env=Qi()),dn)){var i=Ve.env.Promise,s=e.env;bt.then=s.nthen,i.prototype.then=s.gthen,(t.global||e.global)&&(Object.defineProperty(k,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject,s.allSettled&&(i.allSettled=s.allSettled),s.any&&(i.any=s.any))}}function Qi(){var e=k.Promise;return dn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(k,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:bt.then,gthen:e.prototype.then}:{}}function He(e,n,t,i,s){var r=S;try{return _e(e,!0),n(t,i,s)}finally{_e(r,!1)}}function Wi(e){$i.call(un,e)}function Ot(e,n,t,i){return"function"!=typeof e?e:function(){var s=S;t&&$e(),_e(n,!0);try{return e.apply(this,arguments)}finally{_e(s,!1),i&&Wi(me)}}}function Zi(e,n){return function(t,i){return e.call(this,Ot(t,n),Ot(i,n))}}-1===(""+$i).indexOf("[native code]")&&($e=me=O);const Xi="unhandledrejection";function Ji(e,n){var t;try{t=n.onuncatched(e)}catch(r){}if(!1!==t)try{var i,s={promise:n,reason:e};if(k.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(Xi,!0,!0),Q(i,s)):k.CustomEvent&&Q(i=new CustomEvent(Xi,{detail:s}),s),i&&k.dispatchEvent&&(dispatchEvent(i),!k.PromiseRejectionEvent&&k.onunhandledrejection))try{k.onunhandledrejection(i)}catch(r){}ae&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(r){}}var H=_.reject;function es(e,n,t,i){if(e.idbdb&&(e._state.openComplete||S.letThrough||e._vip)){var s=e._createTransaction(n,t,e._dbSchema);try{s.create()}catch(r){return H(r)}return s._promise(n,(r,o)=>we(()=>(S.trans=s,i(r,o,s)))).then(r=>s._completion.then(()=>r))}if(e._state.openComplete)return H(new F.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return H(new F.DatabaseClosed);e.open().catch(O)}return e._state.dbReadyPromise.then(()=>es(e,n,t,i))}const Ge=String.fromCharCode(65535),wn=-1/0,ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ns="String expected.",lt=[],Bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),wa=Bt,_a=Bt,is=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),kt="__dbnames",_n="readonly",bn="readwrite";function Le(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}const ss={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function It(e){return"string"!=typeof e||/\./.test(e)?n=>n:n=>(void 0===n[e]&&e in n&&delete(n=Xe(n))[e],n)}class ba{_trans(n,t,i){const s=this._tx||S.trans,r=this.name;function o(u,c,g){if(!g.schema[r])throw new F.NotFound("Table "+r+" not part of transaction");return t(g.idbtrans,g)}const a=st();try{return s&&s.db===this.db?s===S.trans?s._promise(n,o,i):we(()=>s._promise(n,o,i),{trans:s,transless:S.transless||S}):es(this.db,n,[this.name],o)}finally{a&&rt()}}get(n,t){return n&&n.constructor===Object?this.where(n).first(t):this._trans("readonly",i=>this.core.get({trans:i,key:n}).then(s=>this.hook.reading.fire(s))).then(t)}where(n){if("string"==typeof n)return new this.db.WhereClause(this,n);if(z(n))return new this.db.WhereClause(this,`[${n.join("+")}]`);const t=V(n);if(1===t.length)return this.where(t[0]).equals(n[t[0]]);const i=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&t.every(g=>c.keyPath.indexOf(g)>=0)&&c.keyPath.every(g=>t.indexOf(g)>=0))[0];if(i&&this.db._maxKey!==Ge)return this.where(i.name).equals(i.keyPath.map(c=>n[c]));!i&&ae&&console.warn(`The query ${JSON.stringify(n)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:s}=this.schema,r=this.db._deps.indexedDB;function o(c,g){try{return 0===r.cmp(c,g)}catch(h){return!1}}const[a,u]=t.reduce(([c,g],h)=>{const d=s[h],f=n[h];return[c||d,c||!d?Le(g,d&&d.multi?x=>{const y=fe(x,h);return z(y)&&y.some(v=>o(f,v))}:x=>o(f,fe(x,h))):g]},[null,null]);return a?this.where(a.name).equals(n[a.keyPath]).filter(u):i?this.filter(u):this.where(t).equals("")}filter(n){return this.toCollection().and(n)}count(n){return this.toCollection().count(n)}offset(n){return this.toCollection().offset(n)}limit(n){return this.toCollection().limit(n)}each(n){return this.toCollection().each(n)}toArray(n){return this.toCollection().toArray(n)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(n){return new this.db.Collection(new this.db.WhereClause(this,z(n)?`[${n.join("+")}]`:n))}reverse(){return this.toCollection().reverse()}mapToClass(n){this.schema.mappedClass=n;const t=i=>{if(!i)return i;const s=Object.create(n.prototype);for(var r in i)if(te(i,r))try{s[r]=i[r]}catch(o){}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),n}defineClass(){return this.mapToClass(function n(t){Q(this,t)})}add(n,t){const{auto:i,keyPath:s}=this.schema.primKey;let r=n;return s&&i&&(r=It(s)(n)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:null!=t?[t]:null,values:[r]})).then(o=>o.numFailures?_.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{se(n,s,o)}catch(a){}return o})}update(n,t){if("object"!=typeof n||z(n))return this.where(":id").equals(n).modify(t);{const i=fe(n,this.schema.primKey.keyPath);if(void 0===i)return H(new F.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?V(t).forEach(s=>{se(n,s,t[s])}):t(n,{value:n,primKey:i})}catch(s){}return this.where(":id").equals(i).modify(t)}}put(n,t){const{auto:i,keyPath:s}=this.schema.primKey;let r=n;return s&&i&&(r=It(s)(n)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[r],keys:null!=t?[t]:null})).then(o=>o.numFailures?_.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{se(n,s,o)}catch(a){}return o})}delete(n){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[n]})).then(t=>t.numFailures?_.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"deleteRange",range:ss})).then(n=>n.numFailures?_.reject(n.failures[0]):void 0)}bulkGet(n){return this._trans("readonly",t=>this.core.getMany({keys:n,trans:t}).then(i=>i.map(s=>this.hook.reading.fire(s))))}bulkAdd(n,t,i){const s=Array.isArray(t)?t:void 0,r=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:u}=this.schema.primKey;if(u&&s)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==n.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");const c=n.length;let g=u&&a?n.map(It(u)):n;return this.core.mutate({trans:o,type:"add",keys:s,values:g,wantResults:r}).then(({numFailures:h,results:d,lastResult:f,failures:x})=>{if(0===h)return r?d:f;throw new Je(`${this.name}.bulkAdd(): ${h} of ${c} operations failed`,x)})})}bulkPut(n,t,i){const s=Array.isArray(t)?t:void 0,r=(i=i||(s?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:u}=this.schema.primKey;if(u&&s)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==n.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");const c=n.length;let g=u&&a?n.map(It(u)):n;return this.core.mutate({trans:o,type:"put",keys:s,values:g,wantResults:r}).then(({numFailures:h,results:d,lastResult:f,failures:x})=>{if(0===h)return r?d:f;throw new Je(`${this.name}.bulkPut(): ${h} of ${c} operations failed`,x)})})}bulkDelete(n){const t=n.length;return this._trans("readwrite",i=>this.core.mutate({trans:i,type:"delete",keys:n})).then(({numFailures:i,lastResult:s,failures:r})=>{if(0===i)return s;throw new Je(`${this.name}.bulkDelete(): ${i} of ${t} operations failed`,r)})}}function ot(e){var n={},t=function(a,u){if(u){for(var c=arguments.length,g=new Array(c-1);--c;)g[c-1]=arguments[c];return n[a].subscribe.apply(null,g),e}if("string"==typeof a)return n[a]};t.addEventType=r;for(var i=1,s=arguments.length;i<s;++i)r(arguments[i]);return t;function r(a,u,c){if("object"==typeof a)return o(a);u||(u=ua),c||(c=O);var g={subscribers:[],fire:c,subscribe:function(h){-1===g.subscribers.indexOf(h)&&(g.subscribers.push(h),g.fire=u(g.fire,h))},unsubscribe:function(h){g.subscribers=g.subscribers.filter(function(d){return d!==h}),g.fire=g.subscribers.reduce(u,c)}};return n[a]=t[a]=g,g}function o(a){V(a).forEach(function(u){var c=a[u];if(z(c))r(u,a[u][0],a[u][1]);else{if("asap"!==c)throw new F.InvalidArgument("Invalid event config");var g=r(u,et,function(){for(var d=arguments.length,f=new Array(d);d--;)f[d]=arguments[d];g.subscribers.forEach(function(x){Li(function(){x.apply(null,f)})})})}})}}function at(e,n){return Ke(n).from({prototype:e}),n}function Ne(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function Cn(e,n){e.filter=Le(e.filter,n)}function Sn(e,n,t){var i=e.replayFilter;e.replayFilter=i?()=>Le(i(),n()):n,e.justLimit=t&&!i}function Tt(e,n){if(e.isPrimKey)return n.primaryKey;const t=n.getIndexByKeyPath(e.index);if(!t)throw new F.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return t}function rs(e,n,t){const i=Tt(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:i,range:e.range}})}function Pt(e,n,t,i){const s=e.replayFilter?Le(e.filter,e.replayFilter()):e.filter;if(e.or){const r={},o=(a,u,c)=>{if(!s||s(u,c,d=>u.stop(d),d=>u.fail(d))){var g=u.primaryKey,h=""+g;"[object ArrayBuffer]"===h&&(h=""+new Uint8Array(g)),te(r,h)||(r[h]=!0,n(a,u,c))}};return Promise.all([e.or._iterate(o,t),ls(rs(e,i,t),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return ls(rs(e,i,t),Le(e.algorithm,s),n,!e.keysOnly&&e.valueMapper)}function ls(e,n,t,i){var r=T(i?(o,a,u)=>t(i(o),a,u):t);return e.then(o=>{if(o)return o.start(()=>{var a=()=>o.continue();(!n||n(o,u=>a=u,u=>{o.stop(u),a=O},u=>{o.fail(u),a=O}))&&r(o.value,o,u=>a=u),a()})})}function W(e,n){try{const t=os(e),i=os(n);if(t!==i)return"Array"===t?1:"Array"===i?-1:"binary"===t?1:"binary"===i?-1:"string"===t?1:"string"===i?-1:"Date"===t?1:"Date"!==i?NaN:-1;switch(t){case"number":case"Date":case"string":return e>n?1:e<n?-1:0;case"binary":return function Fa(e,n){const t=e.length,i=n.length,s=t<i?t:i;for(let r=0;r<s;++r)if(e[r]!==n[r])return e[r]<n[r]?-1:1;return t===i?0:t<i?-1:1}(as(e),as(n));case"Array":return function Da(e,n){const t=e.length,i=n.length,s=t<i?t:i;for(let r=0;r<s;++r){const o=W(e[r],n[r]);if(0!==o)return o}return t===i?0:t<i?-1:1}(e,n)}}catch(t){}return NaN}function os(e){const n=typeof e;if("object"!==n)return n;if(ArrayBuffer.isView(e))return"binary";const t=nn(e);return"ArrayBuffer"===t?"binary":t}function as(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Ma{_read(n,t){var i=this._ctx;return i.error?i.table._trans(null,H.bind(null,i.error)):i.table._trans("readonly",n).then(t)}_write(n){var t=this._ctx;return t.error?t.table._trans(null,H.bind(null,t.error)):t.table._trans("readwrite",n,"locked")}_addAlgorithm(n){var t=this._ctx;t.algorithm=Le(t.algorithm,n)}_iterate(n,t){return Pt(this._ctx,n,t,this._ctx.table.core)}clone(n){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return n&&Q(i,n),t._ctx=i,t}raw(){return this._ctx.valueMapper=null,this}each(n){var t=this._ctx;return this._read(i=>Pt(t,n,i,t.table.core))}count(n){return this._read(t=>{const i=this._ctx,s=i.table.core;if(Ne(i,!0))return s.count({trans:t,query:{index:Tt(i,s.schema),range:i.range}}).then(o=>Math.min(o,i.limit));var r=0;return Pt(i,()=>(++r,!1),t,s).then(()=>r)}).then(n)}sortBy(n,t){const i=n.split(".").reverse(),s=i[0],r=i.length-1;function o(c,g){return g?o(c[i[g]],g-1):c[s]}var a="next"===this._ctx.dir?1:-1;function u(c,g){var h=o(c,r),d=o(g,r);return h<d?-a:h>d?a:0}return this.toArray(function(c){return c.sort(u)}).then(t)}toArray(n){return this._read(t=>{var i=this._ctx;if("next"===i.dir&&Ne(i,!0)&&i.limit>0){const{valueMapper:s}=i,r=Tt(i,i.table.core.schema);return i.table.core.query({trans:t,limit:i.limit,values:!0,query:{index:r,range:i.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return Pt(i,r=>s.push(r),t,i.table.core).then(()=>s)}},n)}offset(n){var t=this._ctx;return n<=0||(t.offset+=n,Ne(t)?Sn(t,()=>{var i=n;return(s,r)=>0===i||(1===i?(--i,!1):(r(()=>{s.advance(i),i=0}),!1))}):Sn(t,()=>{var i=n;return()=>--i<0})),this}limit(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Sn(this._ctx,()=>{var t=n;return function(i,s,r){return--t<=0&&s(r),t>=0}},!0),this}until(n,t){return Cn(this._ctx,function(i,s,r){return!n(i.value)||(s(r),t)}),this}first(n){return this.limit(1).toArray(function(t){return t[0]}).then(n)}last(n){return this.reverse().first(n)}filter(n){return Cn(this._ctx,function(t){return n(t.value)}),function Sa(e,n){e.isMatch=Le(e.isMatch,n)}(this._ctx,n),this}and(n){return this.filter(n)}or(n){return new this.db.WhereClause(this._ctx.table,n,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,s){n(s.key,s)})}eachUniqueKey(n){return this._ctx.unique="unique",this.eachKey(n)}eachPrimaryKey(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(i,s){n(s.primaryKey,s)})}keys(n){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each(function(s,r){i.push(r.key)}).then(function(){return i}).then(n)}primaryKeys(n){var t=this._ctx;if("next"===t.dir&&Ne(t,!0)&&t.limit>0)return this._read(s=>{var r=Tt(t,t.table.core.schema);return t.table.core.query({trans:s,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(({result:s})=>s).then(n);t.keysOnly=!t.isMatch;var i=[];return this.each(function(s,r){i.push(r.primaryKey)}).then(function(){return i}).then(n)}uniqueKeys(n){return this._ctx.unique="unique",this.keys(n)}firstKey(n){return this.limit(1).keys(function(t){return t[0]}).then(n)}lastKey(n){return this.reverse().firstKey(n)}distinct(){var n=this._ctx,t=n.index&&n.table.schema.idxByName[n.index];if(!t||!t.multi)return this;var i={};return Cn(this._ctx,function(s){var r=s.primaryKey.toString(),o=te(i,r);return i[r]=!0,!o}),this}modify(n){var t=this._ctx;return this._write(i=>{var s;if("function"==typeof n)s=n;else{var r=V(n),o=r.length;s=function(y){for(var v=!1,m=0;m<o;++m){var A=r[m],w=n[A];fe(y,A)!==w&&(se(y,A,w),v=!0)}return v}}const a=t.table.core,{outbound:u,extractKey:c}=a.schema.primaryKey,g=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],x=(y,v)=>{const{failures:m,numFailures:A}=v;d+=y-A;for(let w of V(m))h.push(m[w])};return this.clone().primaryKeys().then(y=>{const v=m=>{const A=Math.min(g,y.length-m);return a.getMany({trans:i,keys:y.slice(m,m+A),cache:"immutable"}).then(w=>{const p=[],b=[],C=u?[]:null,D=[];for(let R=0;R<A;++R){const P=w[R],G={value:Xe(P),primKey:y[m+R]};!1!==s.call(G,G.value,G)&&(null==G.value?D.push(y[m+R]):u||0===W(c(P),c(G.value))?(b.push(G.value),u&&C.push(y[m+R])):(D.push(y[m+R]),p.push(G.value)))}const M=Ne(t)&&t.limit===1/0&&("function"!=typeof n||n===Dn)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&a.mutate({trans:i,type:"add",values:p}).then(R=>{for(let P in R.failures)D.splice(parseInt(P),1);x(p.length,R)})).then(()=>(b.length>0||M&&"object"==typeof n)&&a.mutate({trans:i,type:"put",keys:C,values:b,criteria:M,changeSpec:"function"!=typeof n&&n}).then(R=>x(b.length,R))).then(()=>(D.length>0||M&&n===Dn)&&a.mutate({trans:i,type:"delete",keys:D,criteria:M}).then(R=>x(D.length,R))).then(()=>y.length>m+A&&v(m+g))})};return v(0).then(()=>{if(h.length>0)throw new wt("Error modifying one or more objects",h,d,f);return y.length})})})}delete(){var n=this._ctx,t=n.range;return Ne(n)&&(n.isPrimKey&&!_a||3===t.type)?this._write(i=>{const{primaryKey:s}=n.table.core.schema,r=t;return n.table.core.count({trans:i,query:{index:s,range:r}}).then(o=>n.table.core.mutate({trans:i,type:"deleteRange",range:r}).then(({failures:a,numFailures:g})=>{if(g)throw new wt("Could not delete some values",Object.keys(a).map(h=>a[h]),o-g);return o-g}))}):this.modify(Dn)}}const Dn=(e,n)=>n.value=null;function Ra(e,n){return e<n?-1:e===n?0:1}function Ga(e,n){return e>n?-1:e===n?0:1}function X(e,n,t){var i=e instanceof cs?new e.Collection(e):e;return i._ctx.error=t?new t(n):new TypeError(n),i}function ze(e){return new e.Collection(e,()=>us("")).limit(0)}function Ba(e,n,t,i,s,r){for(var o=Math.min(e.length,i.length),a=-1,u=0;u<o;++u){var c=n[u];if(c!==i[u])return s(e[u],t[u])<0?e.substr(0,u)+t[u]+t.substr(u+1):s(e[u],i[u])<0?e.substr(0,u)+i[u]+t.substr(u+1):a>=0?e.substr(0,a)+n[a]+t.substr(a+1):null;s(e[u],c)<0&&(a=u)}return o<i.length&&"next"===r?e+t.substr(e.length):o<e.length&&"prev"===r?e.substr(0,t.length):a<0?null:e.substr(0,a)+i[a]+t.substr(a+1)}function Kt(e,n,t,i){var s,r,o,a,u,c,g,h=t.length;if(!t.every(y=>"string"==typeof y))return X(e,ns);function d(y){s=function La(e){return"next"===e?n=>n.toUpperCase():n=>n.toLowerCase()}(y),r=function Oa(e){return"next"===e?n=>n.toLowerCase():n=>n.toUpperCase()}(y),o="next"===y?Ra:Ga;var v=t.map(function(m){return{lower:r(m),upper:s(m)}}).sort(function(m,A){return o(m.lower,A.lower)});a=v.map(function(m){return m.upper}),u=v.map(function(m){return m.lower}),c=y,g="next"===y?"":i}d("next");var f=new e.Collection(e,()=>be(a[0],u[h-1]+i));f._ondirectionchange=function(y){d(y)};var x=0;return f._addAlgorithm(function(y,v,m){var A=y.key;if("string"!=typeof A)return!1;var w=r(A);if(n(w,u,x))return!0;for(var p=null,b=x;b<h;++b){var C=Ba(A,w,a[b],u[b],o,c);null===C&&null===p?x=b+1:(null===p||o(p,C)>0)&&(p=C)}return v(null!==p?function(){y.continue(p+g)}:m),!1}),f}function be(e,n,t,i){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:i}}function us(e){return{type:1,lower:e,upper:e}}class cs{get Collection(){return this._ctx.table.db.Collection}between(n,t,i,s){i=!1!==i,s=!0===s;try{return this._cmp(n,t)>0||0===this._cmp(n,t)&&(i||s)&&(!i||!s)?ze(this):new this.Collection(this,()=>be(n,t,!i,!s))}catch(r){return X(this,ye)}}equals(n){return null==n?X(this,ye):new this.Collection(this,()=>us(n))}above(n){return null==n?X(this,ye):new this.Collection(this,()=>be(n,void 0,!0))}aboveOrEqual(n){return null==n?X(this,ye):new this.Collection(this,()=>be(n,void 0,!1))}below(n){return null==n?X(this,ye):new this.Collection(this,()=>be(void 0,n,!1,!0))}belowOrEqual(n){return null==n?X(this,ye):new this.Collection(this,()=>be(void 0,n))}startsWith(n){return"string"!=typeof n?X(this,ns):this.between(n,n+Ge,!0,!0)}startsWithIgnoreCase(n){return""===n?this.startsWith(n):Kt(this,(t,i)=>0===t.indexOf(i[0]),[n],Ge)}equalsIgnoreCase(n){return Kt(this,(t,i)=>t===i[0],[n],"")}anyOfIgnoreCase(){var n=he.apply(Ye,arguments);return 0===n.length?ze(this):Kt(this,(t,i)=>-1!==i.indexOf(t),n,"")}startsWithAnyOfIgnoreCase(){var n=he.apply(Ye,arguments);return 0===n.length?ze(this):Kt(this,(t,i)=>i.some(s=>0===t.indexOf(s)),n,Ge)}anyOf(){const n=he.apply(Ye,arguments);let t=this._cmp;try{n.sort(t)}catch(r){return X(this,ye)}if(0===n.length)return ze(this);const i=new this.Collection(this,()=>be(n[0],n[n.length-1]));i._ondirectionchange=r=>{t="next"===r?this._ascending:this._descending,n.sort(t)};let s=0;return i._addAlgorithm((r,o,a)=>{const u=r.key;for(;t(u,n[s])>0;)if(++s,s===n.length)return o(a),!1;return 0===t(u,n[s])||(o(()=>{r.continue(n[s])}),!1)}),i}notEqual(n){return this.inAnyRange([[wn,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const n=he.apply(Ye,arguments);if(0===n.length)return new this.Collection(this);try{n.sort(this._ascending)}catch(i){return X(this,ye)}const t=n.reduce((i,s)=>i?i.concat([[i[i.length-1][1],s]]):[[wn,s]],null);return t.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(n,t){const i=this._cmp,s=this._ascending,r=this._descending,o=this._min,a=this._max;if(0===n.length)return ze(this);if(!n.every(p=>void 0!==p[0]&&void 0!==p[1]&&s(p[0],p[1])<=0))return X(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);const u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;let f,h=s;function d(p,b){return h(p[0],b[0])}try{f=n.reduce(function g(p,b){let C=0,D=p.length;for(;C<D;++C){const M=p[C];if(i(b[0],M[1])<0&&i(b[1],M[0])>0){M[0]=o(M[0],b[0]),M[1]=a(M[1],b[1]);break}}return C===D&&p.push(b),p},[]),f.sort(d)}catch(p){return X(this,ye)}let x=0;const y=c?p=>s(p,f[x][1])>0:p=>s(p,f[x][1])>=0,v=u?p=>r(p,f[x][0])>0:p=>r(p,f[x][0])>=0;let A=y;const w=new this.Collection(this,()=>be(f[0][0],f[f.length-1][1],!u,!c));return w._ondirectionchange=p=>{"next"===p?(A=y,h=s):(A=v,h=r),f.sort(d)},w._addAlgorithm((p,b,C)=>{for(var D=p.key;A(D);)if(++x,x===f.length)return b(C),!1;return!!function m(p){return!y(p)&&!v(p)}(D)||(0===this._cmp(D,f[x][1])||0===this._cmp(D,f[x][0])||b(()=>{p.continue(h===s?f[x][0]:f[x][1])}),!1)}),w}startsWithAnyOf(){const n=he.apply(Ye,arguments);return n.every(t=>"string"==typeof t)?0===n.length?ze(this):this.inAnyRange(n.map(t=>[t,t+Ge])):X(this,"startsWithAnyOf() only works with strings")}}function ue(e){return T(function(n){return ut(n),e(n.target.error),!1})}function ut(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const ct="storagemutated",Ce="x-storagemutated-1",Se=ot(null,ct);class Ia{_lock(){return Ze(!S.global),++this._reculock,1===this._reculock&&!S.global&&(S.lockOwnerFor=this),this}_unlock(){if(Ze(!S.global),0==--this._reculock)for(S.global||(S.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{He(n[1],n[0])}catch(t){}}return this}_locked(){return this._reculock&&S.lockOwnerFor!==this}create(n){if(!this.mode)return this;const t=this.db.idbdb,i=this.db._state.dbOpenError;if(Ze(!this.idbtrans),!n&&!t)switch(i&&i.name){case"DatabaseClosedError":throw new F.DatabaseClosed(i);case"MissingAPIError":throw new F.MissingAPI(i.message,i);default:throw new F.OpenFailed(i)}if(!this.active)throw new F.TransactionInactive;return Ze(null===this._completion._state),(n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=T(s=>{ut(s),this._reject(n.error)}),n.onabort=T(s=>{ut(s),this.active&&this._reject(new F.Abort(n.error)),this.active=!1,this.on("abort").fire(s)}),n.oncomplete=T(()=>{this.active=!1,this._resolve(),"mutatedParts"in n&&Se.storagemutated.fire(n.mutatedParts)}),this}_promise(n,t,i){if("readwrite"===n&&"readwrite"!==this.mode)return H(new F.ReadOnly("Transaction is readonly"));if(!this.active)return H(new F.TransactionInactive);if(this._locked())return new _((r,o)=>{this._blockedFuncs.push([()=>{this._promise(n,t,i).then(r,o)},S])});if(i)return we(()=>{var r=new _((o,a)=>{this._lock();const u=t(o,a,this);u&&u.then&&u.then(o,a)});return r.finally(()=>this._unlock()),r._lib=!0,r});var s=new _((r,o)=>{var a=t(r,o,this);a&&a.then&&a.then(r,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(n){var t=this._root();const i=_.resolve(n);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>i);else{t._waitingFor=i,t._waitingQueue=[];var s=t.idbtrans.objectStore(t.storeNames[0]);!function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(s.get(-1/0).onsuccess=o)}()}var r=t._waitingFor;return new _((o,a)=>{i.then(u=>t._waitingQueue.push(T(o.bind(null,u))),u=>t._waitingQueue.push(T(a.bind(null,u)))).finally(()=>{t._waitingFor===r&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new F.Abort))}table(n){const t=this._memoizedTables||(this._memoizedTables={});if(te(t,n))return t[n];const i=this.schema[n];if(!i)throw new F.NotFound("Table "+n+" not part of transaction");const s=new this.db.Table(n,i,this);return s.core=this.db.core.table(n),t[n]=s,s}}function Fn(e,n,t,i,s,r,o){return{name:e,keyPath:n,unique:t,multi:i,auto:s,compound:r,src:(t&&!o?"&":"")+(i?"*":"")+(s?"++":"")+ds(n)}}function ds(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function gs(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:Oi(t,i=>[i.name,i])}}let dt=e=>{try{return e.only([[]]),dt=()=>[[]],[[]]}catch(n){return dt=()=>Ge,Ge}};function Mn(e){return null==e?()=>{}:"string"==typeof e?function Ka(e){return 1===e.split(".").length?t=>t[e]:t=>fe(t,e)}(e):n=>fe(n,e)}function fs(e){return[].slice.call(e)}let Ya=0;function gt(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function ja(e,n,t){function s(g){if(3===g.type)return null;if(4===g.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:h,upper:d,lowerOpen:f,upperOpen:x}=g;return void 0===h?void 0===d?null:n.upperBound(d,!!x):void 0===d?n.lowerBound(h,!!f):n.bound(h,d,!!f,!!x)}const{schema:o,hasGetAll:a}=function i(g,h){const d=fs(g.objectStoreNames);return{schema:{name:g.name,tables:d.map(f=>h.objectStore(f)).map(f=>{const{keyPath:x,autoIncrement:y}=f,v=z(x),A={},w={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==x,compound:v,keyPath:x,autoIncrement:y,unique:!0,extractKey:Mn(x)},indexes:fs(f.indexNames).map(p=>f.index(p)).map(p=>{const{name:b,unique:C,multiEntry:D,keyPath:M}=p,P={name:b,compound:z(M),keyPath:M,unique:C,multiEntry:D,extractKey:Mn(M)};return A[gt(M)]=P,P}),getIndexByKeyPath:p=>A[gt(p)]};return A[":id"]=w.primaryKey,null!=x&&(A[gt(x)]=w.primaryKey),w})},hasGetAll:d.length>0&&"getAll"in h.objectStore(d[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,t),u=o.tables.map(g=>function r(g){const h=g.name;return{name:h,schema:g,mutate:function d({trans:y,type:v,keys:m,values:A,range:w}){return new Promise((p,b)=>{p=T(p);const C=y.objectStore(h),D=null==C.keyPath,M="put"===v||"add"===v;if(!M&&"delete"!==v&&"deleteRange"!==v)throw new Error("Invalid operation type: "+v);const{length:R}=m||A||{length:1};if(m&&A&&m.length!==A.length)throw new Error("Given keys array must have same length as given values array.");if(0===R)return p({numFailures:0,failures:{},results:[],lastResult:void 0});let P;const G=[],J=[];let E=0;const re=ee=>{++E,ut(ee)};if("deleteRange"===v){if(4===w.type)return p({numFailures:E,failures:J,results:[],lastResult:void 0});G.push(P=3===w.type?C.clear():C.delete(s(w)))}else{const[ee,ne]=M?D?[A,m]:[A,null]:[m,null];if(M)for(let N=0;N<R;++N)G.push(P=ne&&void 0!==ne[N]?C[v](ee[N],ne[N]):C[v](ee[N])),P.onerror=re;else for(let N=0;N<R;++N)G.push(P=C[v](ee[N])),P.onerror=re}const le=ee=>{const ne=ee.target.result;G.forEach((N,ht)=>null!=N.error&&(J[ht]=N.error)),p({numFailures:E,failures:J,results:"delete"===v?m:G.map(N=>N.result),lastResult:ne})};P.onerror=ee=>{re(ee),le(ee)},P.onsuccess=le})},getMany:({trans:y,keys:v})=>new Promise((m,A)=>{m=T(m);const w=y.objectStore(h),p=v.length,b=new Array(p);let M,C=0,D=0;const R=G=>{const J=G.target;b[J._pos]=J.result,++D===C&&m(b)},P=ue(A);for(let G=0;G<p;++G)null!=v[G]&&(M=w.get(v[G]),M._pos=G,M.onsuccess=R,M.onerror=P,++C);0===C&&m(b)}),get:({trans:y,key:v})=>new Promise((m,A)=>{m=T(m);const p=y.objectStore(h).get(v);p.onsuccess=b=>m(b.target.result),p.onerror=ue(A)}),query:function x(y){return v=>new Promise((m,A)=>{m=T(m);const{trans:w,values:p,limit:b,query:C}=v,D=b===1/0?void 0:b,{index:M,range:R}=C,P=w.objectStore(h),G=M.isPrimaryKey?P:P.index(M.name),J=s(R);if(0===b)return m({result:[]});if(y){const E=p?G.getAll(J,D):G.getAllKeys(J,D);E.onsuccess=re=>m({result:re.target.result}),E.onerror=ue(A)}else{let E=0;const re=p||!("openKeyCursor"in G)?G.openCursor(J):G.openKeyCursor(J),le=[];re.onsuccess=ee=>{const ne=re.result;return ne?(le.push(p?ne.value:ne.primaryKey),++E===b?m({result:le}):void ne.continue()):m({result:le})},re.onerror=ue(A)}})}(a),openCursor:function f({trans:y,values:v,query:m,reverse:A,unique:w}){return new Promise((p,b)=>{p=T(p);const{index:C,range:D}=m,M=y.objectStore(h),R=C.isPrimaryKey?M:M.index(C.name),P=A?w?"prevunique":"prev":w?"nextunique":"next",G=v||!("openKeyCursor"in R)?R.openCursor(s(D),P):R.openKeyCursor(s(D),P);G.onerror=ue(b),G.onsuccess=T(J=>{const E=G.result;if(!E)return void p(null);E.___id=++Ya,E.done=!1;const re=E.continue.bind(E);let le=E.continuePrimaryKey;le&&(le=le.bind(E));const ee=E.advance.bind(E),N=()=>{throw new Error("Cursor not stopped")};E.trans=y,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=T(b),E.next=function(){let ht=1;return this.start(()=>ht--?this.continue():this.stop()).then(()=>this)},E.start=ht=>{const Mu=new Promise((qe,vs)=>{qe=T(qe),G.onerror=ue(vs),E.fail=vs,E.stop=Eu=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=N,qe(Eu)}}),$n=()=>{if(G.result)try{ht()}catch(qe){E.fail(qe)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return G.onsuccess=T(qe=>{G.onsuccess=$n,$n()}),E.continue=re,E.continuePrimaryKey=le,E.advance=ee,$n(),Mu},p(E)},b)})},count({query:y,trans:v}){const{index:m,range:A}=y;return new Promise((w,p)=>{const b=v.objectStore(h),C=m.isPrimaryKey?b:b.index(m.name),D=s(A),M=D?C.count(D):C.count();M.onsuccess=T(R=>w(R.target.result)),M.onerror=ue(p)})}}}(g)),c={};return u.forEach(g=>c[g.name]=g),{stack:"dbcore",transaction:e.transaction.bind(e),table(g){if(!c[g])throw new Error(`Table '${g}' not found`);return c[g]},MIN_KEY:-1/0,MAX_KEY:dt(n),schema:o}}function Va(e,n){return n.reduce((t,{create:i})=>$($({},t),i(t)),e)}function En({_novip:e},n){const i=function $a(e,n,{IDBKeyRange:t},s){return{dbcore:Va(ja(n,t,s),e.dbcore)}}(e._middlewares,n.db,e._deps,n);e.core=i.dbcore,e.tables.forEach(s=>{const r=s.name;e.core.schema.tables.some(o=>o.name===r)&&(s.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=s.core))})}function Yt({_novip:e},n,t,i){t.forEach(s=>{const r=i[s];n.forEach(o=>{const a=en(o,s);(!a||"value"in a&&void 0===a.value)&&(o===e.Transaction.prototype||o instanceof e.Transaction?ge(o,s,{get(){return this.table(s)},set(u){Ri(this,s,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new e.Table(s,r))})})}function Rn({_novip:e},n){n.forEach(t=>{for(let i in t)t[i]instanceof e.Table&&delete t[i]})}function Ha(e,n){return e._cfg.version-n._cfg.version}function hs(e,n){const t={del:[],add:[],change:[]};let i;for(i in e)n[i]||t.del.push(i);for(i in n){const s=e[i],r=n[i];if(s){const o={name:i,def:r,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(r.primKey.keyPath||"")||s.primKey.auto!==r.primKey.auto&&!Bt)o.recreate=!0,t.change.push(o);else{const a=s.idxByName,u=r.idxByName;let c;for(c in a)u[c]||o.del.push(c);for(c in u){const g=a[c],h=u[c];g?g.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([i,r])}return t}function Gn(e,n,t,i){const s=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return i.forEach(r=>Ln(s,r)),s}function Ln(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function On(e,n,t){const i={};return At(n.objectStoreNames,0).forEach(r=>{const o=t.objectStore(r);let a=o.keyPath;const u=Fn(ds(a),a||"",!1,!1,!!o.autoIncrement,a&&"string"!=typeof a,!0),c=[];for(let h=0;h<o.indexNames.length;++h){const d=o.index(o.indexNames[h]);a=d.keyPath;var g=Fn(d.name,a,!!d.unique,!!d.multiEntry,!1,a&&"string"!=typeof a,!1);c.push(g)}i[r]=gs(r,u,c)}),i}function Bn({_novip:e},n,t){const i=t.db.objectStoreNames;for(let s=0;s<i.length;++s){const r=i[s],o=t.objectStore(r);e._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const u=o.indexNames[a],c=o.index(u).keyPath,g="string"==typeof c?c:"["+At(c).join("+")+"]";if(n[r]){const h=n[r].idxByName[g];h&&(h.name=u,delete n[r].idxByName[g],n[r].idxByName[u]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&k.WorkerGlobalScope&&k instanceof k.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Xa{_parseStoresSpec(n,t){V(n).forEach(i=>{if(null!==n[i]){var s=function Za(e){return e.split(",").map((n,t)=>{const i=(n=n.trim()).replace(/([&*]|\+\+)/g,""),s=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Fn(i,s||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),z(s),0===t)})}(n[i]),r=s.shift();if(r.multi)throw new F.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")}),t[i]=gs(i,r,s)}})}stores(n){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?Q(this._cfg.storesSource,n):n;const s={};let r={};return t._versions.forEach(o=>{Q(s,o._cfg.storesSource),r=o._cfg.dbschema={},o._parseStoresSpec(s,r)}),t._dbSchema=r,Rn(t,[t._allTables,t,t.Transaction.prototype]),Yt(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],V(r),r),t._storeNames=V(r),this}upgrade(n){return this._cfg.contentUpgrade=an(this._cfg.contentUpgrade||O,n),this}}function kn(e,n){let t=e._dbNamesDB;return t||(t=e._dbNamesDB=new Oe(kt,{addons:[],indexedDB:e,IDBKeyRange:n}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function In(e){return e&&"function"==typeof e.databases}function Tn(e){return we(function(){return S.letThrough=!0,e()})}function iu(){var n;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var i=function(){return indexedDB.databases().finally(t)};n=setInterval(i,100),i()}).finally(function(){return clearInterval(n)}):Promise.resolve()}function su(e){const n=e._state,{indexedDB:t}=e._deps;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(()=>n.dbOpenError?H(n.dbOpenError):e);ae&&(n.openCanceller._stackHolder=Fe()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;const i=n.openCanceller;function s(){if(n.openCanceller!==i)throw new F.DatabaseClosed("db.open() was cancelled")}let r=n.dbReadyResolve,o=null,a=!1;return _.race([i,("undefined"==typeof navigator?_.resolve():iu()).then(()=>new _((u,c)=>{if(s(),!t)throw new F.MissingAPI;const g=e.name,h=n.autoSchema?t.open(g):t.open(g,Math.round(10*e.verno));if(!h)throw new F.MissingAPI;h.onerror=ue(c),h.onblocked=T(e._fireOnBlocked),h.onupgradeneeded=T(d=>{if(o=h.transaction,n.autoSchema&&!e._options.allowEmptyDB){h.onerror=ut,o.abort(),h.result.close();const x=t.deleteDatabase(g);x.onsuccess=x.onerror=T(()=>{c(new F.NoSuchDatabase(`Database ${g} doesnt exist`))})}else{o.onerror=ue(c);var f=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=f<1,e._novip.idbdb=h.result,function Na(e,n,t,i){const s=e._dbSchema,r=e._createTransaction("readwrite",e._storeNames,s);r.create(t),r._completion.catch(i);const o=r._reject.bind(r),a=S.transless||S;we(()=>{S.trans=r,S.transless=a,0===n?(V(s).forEach(u=>{Gn(t,u,s[u].primKey,s[u].indexes)}),En(e,t),_.follow(()=>e.on.populate.fire(r)).catch(o)):function za({_novip:e},n,t,i){const s=[],r=e._versions;let o=e._dbSchema=On(0,e.idbdb,i),a=!1;return r.filter(g=>g._cfg.version>=n).forEach(g=>{s.push(()=>{const h=o,d=g._cfg.dbschema;Bn(e,h,i),Bn(e,d,i),o=e._dbSchema=d;const f=hs(h,d);f.add.forEach(y=>{Gn(i,y[0],y[1].primKey,y[1].indexes)}),f.change.forEach(y=>{if(y.recreate)throw new F.Upgrade("Not yet support for changing primary key");{const v=i.objectStore(y.name);y.add.forEach(m=>Ln(v,m)),y.change.forEach(m=>{v.deleteIndex(m.name),Ln(v,m)}),y.del.forEach(m=>v.deleteIndex(m))}});const x=g._cfg.contentUpgrade;if(x&&g._cfg.version>n){En(e,i),t._memoizedTables={},a=!0;let y=Bi(d);f.del.forEach(w=>{y[w]=h[w]}),Rn(e,[e.Transaction.prototype]),Yt(e,[e.Transaction.prototype],V(y),y),t.schema=y;const v=rn(x);let m;v&&$e();const A=_.follow(()=>{if(m=x(t),m&&v){var w=me.bind(null,null);m.then(w,w)}});return m&&"function"==typeof m.then?_.resolve(m):A.then(()=>m)}}),s.push(h=>{a&&wa||function Ua(e,n){[].slice.call(n.db.objectStoreNames).forEach(t=>null==e[t]&&n.db.deleteObjectStore(t))}(g._cfg.dbschema,h),Rn(e,[e.Transaction.prototype]),Yt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),t.schema=e._dbSchema})}),function c(){return s.length?_.resolve(s.shift()(t.idbtrans)).then(c):_.resolve()}().then(()=>{!function qa(e,n){V(e).forEach(t=>{n.db.objectStoreNames.contains(t)||Gn(n,t,e[t].primKey,e[t].indexes)})}(o,i)})}(e,n,r,t).catch(o)})}(e,f/10,o,c)}},c),h.onsuccess=T(()=>{o=null;const d=e._novip.idbdb=h.result,f=At(d.objectStoreNames);if(f.length>0)try{const x=d.transaction(function Pa(e){return 1===e.length?e[0]:e}(f),"readonly");n.autoSchema?function Qa({_novip:e},n,t){e.verno=n.version/10;const i=e._dbSchema=On(0,n,t);e._storeNames=At(n.objectStoreNames,0),Yt(e,[e._allTables],V(i),i)}(e,d,x):(Bn(e,e._dbSchema,x),function Wa(e,n){const i=hs(On(0,e.idbdb,n),e._dbSchema);return!(i.add.length||i.change.some(s=>s.add.length||s.change.length))}(e,x)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),En(e,x)}catch(x){}lt.push(e),d.onversionchange=T(x=>{n.vcFired=!0,e.on("versionchange").fire(x)}),d.onclose=T(x=>{e.on("close").fire(x)}),a&&function tu({indexedDB:e,IDBKeyRange:n},t){!In(e)&&t!==kt&&kn(e,n).put({name:t}).catch(O)}(e._deps,g),u()},c)}))]).then(()=>(s(),n.onReadyBeingFired=[],_.resolve(Tn(()=>e.on.ready.fire(e.vip))).then(function u(){if(n.onReadyBeingFired.length>0){let c=n.onReadyBeingFired.reduce(an,O);return n.onReadyBeingFired=[],_.resolve(Tn(()=>c(e.vip))).then(u)}}))).finally(()=>{n.onReadyBeingFired=null,n.isBeingOpened=!1}).then(()=>e).catch(u=>{n.dbOpenError=u;try{o&&o.abort()}catch(c){}return i===n.openCanceller&&e._close(),H(u)}).finally(()=>{n.openComplete=!0,r()})}function Pn(e){var n=o=>e.next(o),i=r(n),s=r(o=>e.throw(o));function r(o){return a=>{var u=o(a),c=u.value;return u.done?c:c&&"function"==typeof c.then?c.then(i,s):z(c)?Promise.all(c).then(i,s):i(c)}}return r(n)()}function ru(e,n,t){var i=arguments.length;if(i<2)throw new F.InvalidArgument("Too few arguments");for(var s=new Array(i-1);--i;)s[i-1]=arguments[i];t=s.pop();var r=ki(s);return[e,r,t]}function lu(e,n,t,i,s){return _.resolve().then(()=>{const r=S.transless||S,o=e._createTransaction(n,t,e._dbSchema,i),a={trans:o,transless:r};i?o.idbtrans=i.idbtrans:o.create();const u=rn(s);let c;u&&$e();const g=_.follow(()=>{if(c=s.call(o,o),c)if(u){var h=me.bind(null,null);c.then(h,h)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=Pn(c))},a);return(c&&"function"==typeof c.then?_.resolve(c).then(h=>o.active?h:H(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):g.then(()=>c)).then(h=>(i&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),H(h)))})}function jt(e,n,t){const i=z(e)?e.slice():[e];for(let s=0;s<t;++s)i.push(n);return i}const au={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function ou(e){return Z($({},e),{table(n){const t=e.table(n),{schema:i}=t,s={},r=[];function o(d,f,x){const y=gt(d),v=s[y]=s[y]||[],m=null==d?0:"string"==typeof d?1:d.length,A=f>0,w=Z($({},x),{isVirtual:A,keyTail:f,keyLength:m,extractKey:Mn(d),unique:!A&&x.unique});return v.push(w),w.isPrimaryKey||r.push(w),m>1&&o(2===m?d[0]:d.slice(0,m-1),f+1,x),v.sort((p,b)=>p.keyTail-b.keyTail),w}const a=o(i.primaryKey.keyPath,0,i.primaryKey);s[":id"]=[a];for(const d of i.indexes)o(d.keyPath,0,d);function c(d,f){return{type:1===d.type?2:d.type,lower:jt(d.lower,d.lowerOpen?e.MAX_KEY:e.MIN_KEY,f),lowerOpen:!0,upper:jt(d.upper,d.upperOpen?e.MIN_KEY:e.MAX_KEY,f),upperOpen:!0}}function g(d){const f=d.query.index;return f.isVirtual?Z($({},d),{query:{index:f,range:c(d.query.range,f.keyTail)}}):d}return Z($({},t),{schema:Z($({},i),{primaryKey:a,indexes:r,getIndexByKeyPath:function u(d){const f=s[gt(d)];return f&&f[0]}}),count:d=>t.count(g(d)),query:d=>t.query(g(d)),openCursor(d){const{keyTail:f,isVirtual:x,keyLength:y}=d.query.index;return x?t.openCursor(g(d)).then(m=>m&&function v(m){return Object.create(m,{continue:{value:function A(p){null!=p?m.continue(jt(p,d.reverse?e.MAX_KEY:e.MIN_KEY,f)):d.unique?m.continue(m.key.slice(0,y).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,f)):m.continue()}},continuePrimaryKey:{value(p,b){m.continuePrimaryKey(jt(p,e.MAX_KEY,f),b)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const p=m.key;return 1===y?p[0]:p.slice(0,y)}},value:{get:()=>m.value}})}(m)):t.openCursor(d)}})}})}};function Kn(e,n,t,i){return t=t||{},i=i||"",V(e).forEach(s=>{if(te(n,s)){var r=e[s],o=n[s];if("object"==typeof r&&"object"==typeof o&&r&&o){const a=nn(r);a!==nn(o)?t[i+s]=n[s]:"Object"===a?Kn(r,o,t,i+s+"."):r!==o&&(t[i+s]=n[s])}else r!==o&&(t[i+s]=n[s])}else t[i+s]=void 0}),V(n).forEach(s=>{te(e,s)||(t[i+s]=n[s])}),t}const cu={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>Z($({},e),{table(n){const t=e.table(n),{primaryKey:i}=t.schema;return Z($({},t),{mutate(r){const o=S.trans,{deleting:a,creating:u,updating:c}=o.table(n).hook;switch(r.type){case"add":if(u.fire===O)break;return o._promise("readwrite",()=>g(r),!0);case"put":if(u.fire===O&&c.fire===O)break;return o._promise("readwrite",()=>g(r),!0);case"delete":if(a.fire===O)break;return o._promise("readwrite",()=>g(r),!0);case"deleteRange":if(a.fire===O)break;return o._promise("readwrite",()=>function h(f){return d(f.trans,f.range,1e4)}(r),!0)}return t.mutate(r);function g(f){const x=S.trans,y=f.keys||function uu(e,n){return"delete"===n.type?n.keys:n.keys||n.values.map(e.extractKey)}(i,f);if(!y)throw new Error("Keys missing");return"delete"!==(f="add"===f.type||"put"===f.type?Z($({},f),{keys:y}):$({},f)).type&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function du(e,n,t){return"add"===n.type?Promise.resolve([]):e.getMany({trans:n.trans,keys:t,cache:"immutable"})}(t,f,y).then(v=>{const m=y.map((A,w)=>{const p=v[w],b={onerror:null,onsuccess:null};if("delete"===f.type)a.fire.call(b,A,p,x);else if("add"===f.type||void 0===p){const C=u.fire.call(b,A,f.values[w],x);null==A&&null!=C&&(f.keys[w]=A=C,i.outbound||se(f.values[w],i.keyPath,A))}else{const C=Kn(p,f.values[w]),D=c.fire.call(b,C,A,p,x);if(D){const M=f.values[w];Object.keys(D).forEach(R=>{te(M,R)?M[R]=D[R]:se(M,R,D[R])})}}return b});return t.mutate(f).then(({failures:A,results:w,numFailures:p,lastResult:b})=>{for(let C=0;C<y.length;++C){const D=w?w[C]:y[C],M=m[C];null==D?M.onerror&&M.onerror(A[C]):M.onsuccess&&M.onsuccess("put"===f.type&&v[C]?f.values[C]:D)}return{failures:A,results:w,numFailures:p,lastResult:b}}).catch(A=>(m.forEach(w=>w.onerror&&w.onerror(A)),Promise.reject(A)))})}function d(f,x,y){return t.query({trans:f,values:!1,query:{index:i,range:x},limit:y}).then(({result:v})=>g({type:"delete",keys:v,trans:f}).then(m=>m.numFailures>0?Promise.reject(m.failures[0]):v.length<y?{failures:[],numFailures:0,lastResult:void 0}:d(f,Z($({},x),{lower:v[v.length-1],lowerOpen:!0}),y)))}}})}})};function ms(e,n,t){try{if(!n||n.keys.length<e.length)return null;const i=[];for(let s=0,r=0;s<n.keys.length&&r<e.length;++s)0===W(n.keys[s],e[r])&&(i.push(t?Xe(n.values[s]):n.values[s]),++r);return i.length===e.length?i:null}catch(i){return null}}const gu={stack:"dbcore",level:-1,create:e=>({table:n=>{const t=e.table(n);return Z($({},t),{getMany:i=>{if(!i.cache)return t.getMany(i);const s=ms(i.keys,i.trans._cache,"clone"===i.cache);return s?_.resolve(s):t.getMany(i).then(r=>(i.trans._cache={keys:i.keys,values:"clone"===i.cache?Xe(r):r},r))},mutate:i=>("add"!==i.type&&(i.trans._cache=null),t.mutate(i))})}})};function Yn(e){return!("from"in e)}const pe=function(e,n){if(!this){const t=new pe;return e&&"d"in e&&Q(t,e),t}Q(this,arguments.length?{d:1,from:e,to:arguments.length>1?n:e}:{d:0})};function ft(e,n,t){const i=W(n,t);if(isNaN(i))return;if(i>0)throw RangeError();if(Yn(e))return Q(e,{from:n,to:t,d:1});const s=e.l,r=e.r;if(W(t,e.from)<0)return s?ft(s,n,t):e.l={from:n,to:t,d:1,l:null,r:null},ys(e);if(W(n,e.to)>0)return r?ft(r,n,t):e.r={from:n,to:t,d:1,l:null,r:null},ys(e);W(n,e.from)<0&&(e.from=n,e.l=null,e.d=r?r.d+1:1),W(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;s&&!e.l&&Vt(e,s),r&&o&&Vt(e,r)}function Vt(e,n){Yn(n)||function t(i,{from:s,to:r,l:o,r:a}){ft(i,s,r),o&&t(i,o),a&&t(i,a)}(e,n)}function jn(e){let n=Yn(e)?null:{s:0,n:e};return{next(t){const i=arguments.length>0;for(;n;)switch(n.s){case 0:if(n.s=1,i)for(;n.n.l&&W(t,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!i||W(t,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function ys(e){var n,t;const i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(t=e.l)||void 0===t?void 0:t.d)||0),s=i>1?"r":i<-1?"l":"";if(s){const r="r"===s?"l":"r",o=$({},e),a=e[s];e.from=a.from,e.to=a.to,e[s]=a[s],o[s]=a[r],e[r]=o,o.d=ps(o)}e.d=ps(e)}function ps({r:e,l:n}){return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}Pe(pe.prototype,{add(e){return Vt(this,e),this},addKey(e){return ft(this,e,e),this},addKeys(e){return e.forEach(n=>ft(this,n,n)),this},[sn](){return jn(this)}});const hu={stack:"dbcore",level:0,create:e=>{const n=e.schema.name,t=new pe(e.MIN_KEY,e.MAX_KEY);return Z($({},e),{table:i=>{const s=e.table(i),{schema:r}=s,{primaryKey:o}=r,{extractKey:a,outbound:u}=o,c=Z($({},s),{mutate:d=>{const f=d.trans,x=f.mutatedParts||(f.mutatedParts={}),y=C=>{const D=`idb://${n}/${i}/${C}`;return x[D]||(x[D]=new pe)},v=y(""),m=y(":dels"),{type:A}=d;let[w,p]="deleteRange"===d.type?[d.range]:"delete"===d.type?[d.keys]:d.values.length<50?[[],d.values]:[];const b=d.trans._cache;return s.mutate(d).then(C=>{if(z(w)){"delete"!==A&&(w=C.results),v.addKeys(w);const D=ms(w,b);!D&&"add"!==A&&m.addKeys(w),(D||p)&&function mu(e,n,t,i){n.indexes.forEach(function s(r){const o=e(r.name||"");function a(c){return null!=c?r.extractKey(c):null}const u=c=>r.multiEntry&&z(c)?c.forEach(g=>o.addKey(g)):o.addKey(c);(t||i).forEach((c,g)=>{const h=t&&a(t[g]),d=i&&a(i[g]);0!==W(h,d)&&(null!=h&&u(h),null!=d&&u(d))})})}(y,r,D,p)}else if(w){const D={from:w.lower,to:w.upper};m.add(D),v.add(D)}else v.add(t),m.add(t),r.indexes.forEach(D=>y(D.name).add(t));return C})}}),g=({query:{index:d,range:f}})=>{var x,y;return[d,new pe(null!==(x=f.lower)&&void 0!==x?x:e.MIN_KEY,null!==(y=f.upper)&&void 0!==y?y:e.MAX_KEY)]},h={get:d=>[o,new pe(d.key)],getMany:d=>[o,(new pe).addKeys(d.keys)],count:g,query:g,openCursor:g};return V(h).forEach(d=>{c[d]=function(f){const{subscr:x}=S;if(x){const y=p=>{const b=`idb://${n}/${i}/${p}`;return x[b]||(x[b]=new pe)},v=y(""),m=y(":dels"),[A,w]=h[d](f);if(y(A.name||"").add(w),!A.isPrimaryKey){if("count"!==d){const p="query"===d&&u&&f.values&&s.query(Z($({},f),{values:!1}));return s[d].apply(this,arguments).then(b=>{if("query"===d){if(u&&f.values)return p.then(({result:D})=>(v.addKeys(D),b));const C=f.values?b.result.map(a):b.result;f.values?v.addKeys(C):m.addKeys(C)}else if("openCursor"===d){const C=b,D=f.values;return C&&Object.create(C,{key:{get:()=>(m.addKey(C.primaryKey),C.key)},primaryKey:{get(){const M=C.primaryKey;return m.addKey(M),M}},value:{get:()=>(D&&v.addKey(C.primaryKey),C.value)}})}return b})}m.add(t)}}return s[d].apply(this,arguments)}}),c}})}};class Oe{constructor(n,t){this._middlewares={},this.verno=0;const i=Oe.dependencies;this._options=t=$({addons:Oe.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:s}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const r={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:O,dbReadyPromise:null,cancelOpen:O,openCanceller:null,autoSchema:!0};r.dbReadyPromise=new _(o=>{r.dbReadyResolve=o}),r.openCanceller=new _((o,a)=>{r.cancelOpen=a}),this._state=r,this.name=n,this.on=ot(this,"populate","blocked","versionchange","close",{ready:[an,O]}),this.on.ready.subscribe=Gi(this.on.ready.subscribe,o=>(a,u)=>{Oe.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||_.resolve().then(a),u&&o(a);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(a),u&&o(a);else{o(a);const g=this;u||o(function h(){g.on.ready.unsubscribe(a),g.on.ready.unsubscribe(h)})}})}),this.Collection=function Ea(e){return at(Ma.prototype,function(t,i){this.db=e;let s=ss,r=null;if(i)try{s=i()}catch(c){r=c}const o=t._ctx,a=o.table,u=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:u!==et?u:null}})}(this),this.Table=function Ca(e){return at(ba.prototype,function(t,i,s){this.db=e,this._tx=s,this.name=t,this.schema=i,this.hook=e._allTables[t]?e._allTables[t].hook:ot(null,{creating:[la,O],reading:[ra,et],updating:[aa,O],deleting:[oa,O]})})}(this),this.Transaction=function Ta(e){return at(Ia.prototype,function(t,i,s,r,o){this.db=e,this.mode=t,this.storeNames=i,this.schema=s,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=ot(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _((a,u)=>{this._resolve=a,this._reject=u}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},a=>{var u=this.active;return this.active=!1,this.on.error.fire(a),this.parent?this.parent._reject(a):u&&this.idbtrans&&this.idbtrans.abort(),H(a)})})}(this),this.Version=function Ja(e){return at(Xa.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function ka(e){return at(cs.prototype,function(t,i,s){this.db=e,this._ctx={table:t,index:":id"===i?null:i,or:s};const r=e._deps.indexedDB;if(!r)throw new F.MissingAPI;this._cmp=this._ascending=r.cmp.bind(r),this._descending=(o,a)=>r.cmp(a,o),this._max=(o,a)=>r.cmp(o,a)>0?o:a,this._min=(o,a)=>r.cmp(o,a)<0?o:a,this._IDBKeyRange=e._deps.IDBKeyRange})}(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=dt(t.IDBKeyRange),this._createTransaction=(o,a,u,c)=>new this.Transaction(o,a,u,this._options.chromeTransactionDurability,c),this._fireOnBlocked=o=>{this.on("blocked").fire(o),lt.filter(a=>a.name===this.name&&a!==this&&!a._state.vcFired).map(a=>a.on("versionchange").fire(o))},this.use(au),this.use(cu),this.use(hu),this.use(gu),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(o=>o(this))}version(n){if(isNaN(n)||n<.1)throw new F.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);const t=this._versions;var i=t.filter(s=>s._cfg.version===n)[0];return i||(i=new this.Version(n),t.push(i),t.sort(Ha),i.stores({}),this._state.autoSchema=!1,i)}_whenReady(n){return this.idbdb&&(this._state.openComplete||S.letThrough||this._vip)?n():new _((t,i)=>{if(this._state.openComplete)return i(new F.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void i(new F.DatabaseClosed);this.open().catch(O)}this._state.dbReadyPromise.then(t,i)}).then(n)}use({stack:n,create:t,level:i,name:s}){s&&this.unuse({stack:n,name:s});const r=this._middlewares[n]||(this._middlewares[n]=[]);return r.push({stack:n,create:t,level:null==i?10:i,name:s}),r.sort((o,a)=>o.level-a.level),this}unuse({stack:n,name:t,create:i}){return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(s=>i?s.create!==i:!!t&&s.name!==t)),this}open(){return su(this)}_close(){const n=this._state,t=lt.indexOf(this);if(t>=0&&lt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(i){}this._novip.idbdb=null}n.dbReadyPromise=new _(i=>{n.dbReadyResolve=i}),n.openCanceller=new _((i,s)=>{n.cancelOpen=s})}close(){this._close();const n=this._state;this._options.autoOpen=!1,n.dbOpenError=new F.DatabaseClosed,n.isBeingOpened&&n.cancelOpen(n.dbOpenError)}delete(){const n=arguments.length>0,t=this._state;return new _((i,s)=>{const r=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=T(()=>{(function nu({indexedDB:e,IDBKeyRange:n},t){!In(e)&&t!==kt&&kn(e,n).delete(t).catch(O)})(this._deps,this.name),i()}),o.onerror=ue(s),o.onblocked=this._fireOnBlocked};if(n)throw new F.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(r):r()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const n=this._state.dbOpenError;return n&&"DatabaseClosed"===n.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return V(this._allTables).map(n=>this._allTables[n])}transaction(){const n=ru.apply(this,arguments);return this._transaction.apply(this,n)}_transaction(n,t,i){let s=S.trans;(!s||s.db!==this||-1!==n.indexOf("!"))&&(s=null);const r=-1!==n.indexOf("?");let o,a;n=n.replace("!","").replace("?","");try{if(a=t.map(c=>{var g=c instanceof this.Table?c.name:c;if("string"!=typeof g)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),"r"==n||n===_n)o=_n;else{if("rw"!=n&&n!=bn)throw new F.InvalidArgument("Invalid transaction mode: "+n);o=bn}if(s){if(s.mode===_n&&o===bn){if(!r)throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&a.forEach(c=>{if(s&&-1===s.storeNames.indexOf(c)){if(!r)throw new F.SubTransaction("Table "+c+" not included in parent transaction.");s=null}}),r&&s&&!s.active&&(s=null)}}catch(c){return s?s._promise(null,(g,h)=>{h(c)}):H(c)}const u=lu.bind(null,this,o,a,s,i);return s?s._promise(o,u,"lock"):S.trans?He(S.transless,()=>this._whenReady(u)):this._whenReady(u)}table(n){if(!te(this._allTables,n))throw new F.InvalidTable(`Table ${n} does not exist`);return this._allTables[n]}}const yu="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class pu{constructor(n){this._subscribe=n}subscribe(n,t,i){return this._subscribe(n&&"function"!=typeof n?n:{next:n,error:t,complete:i})}[yu](){return this}}function xs(e,n){return V(n).forEach(t=>{Vt(e[t]||(e[t]=new pe),n[t])}),e}let Vn;try{Vn={indexedDB:k.indexedDB||k.mozIndexedDB||k.webkitIndexedDB||k.msIndexedDB,IDBKeyRange:k.IDBKeyRange||k.webkitIDBKeyRange}}catch(e){Vn={indexedDB:null,IDBKeyRange:null}}const Be=Oe;function $t(e){let n=xe;try{xe=!0,Se.storagemutated.fire(e)}finally{xe=n}}Pe(Be,Z($({},_t),{delete:e=>new Be(e,{addons:[]}).delete(),exists:e=>new Be(e,{addons:[]}).open().then(n=>(n.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function eu({indexedDB:e,IDBKeyRange:n}){return In(e)?Promise.resolve(e.databases()).then(t=>t.map(i=>i.name).filter(i=>i!==kt)):kn(e,n).toCollection().primaryKeys()}(Be.dependencies).then(e)}catch(n){return H(new F.MissingAPI)}},defineClass:()=>function e(n){Q(this,n)},ignoreTransaction:e=>S.trans?He(S.transless,e):e(),vip:Tn,async:function(e){return function(){try{var n=Pn(e.apply(this,arguments));return n&&"function"==typeof n.then?n:_.resolve(n)}catch(t){return H(t)}}},spawn:function(e,n,t){try{var i=Pn(e.apply(t,n||[]));return i&&"function"==typeof i.then?i:_.resolve(i)}catch(s){return H(s)}},currentTransaction:{get:()=>S.trans||null},waitFor:function(e,n){const t=_.resolve("function"==typeof e?Be.ignoreTransaction(e):e).timeout(n||6e4);return S.trans?S.trans.waitFor(t):t},Promise:_,debug:{get:()=>ae,set:e=>{Ti(e,"dexie"===e?()=>!0:is)}},derive:Ke,extend:Q,props:Pe,override:Gi,Events:ot,on:Se,liveQuery:function xu(e){return new pu(n=>{const t=rn(e);let s=!1,r={},o={};const a={get closed(){return s},unsubscribe:()=>{s=!0,Se.storagemutated.unsubscribe(h)}};n.start&&n.start(a);let u=!1,c=!1;function g(){return V(o).some(f=>r[f]&&function fu(e,n){const t=jn(n);let i=t.next();if(i.done)return!1;let s=i.value;const r=jn(e);let o=r.next(s.from),a=o.value;for(;!i.done&&!o.done;){if(W(a.from,s.to)<=0&&W(a.to,s.from)>=0)return!0;W(s.from,a.from)<0?s=(i=t.next(a.from)).value:a=(o=r.next(s.from)).value}return!1}(r[f],o[f]))}const h=f=>{xs(r,f),g()&&d()},d=()=>{if(u||s)return;r={};const f={},x=function i(f){t&&$e();const x=()=>we(e,{subscr:f,trans:null}),y=S.trans?He(S.transless,x):x();return t&&y.then(me,me),y}(f);c||(Se(ct,h),c=!0),u=!0,Promise.resolve(x).then(y=>{u=!1,!s&&(g()?d():(r={},o=f,n.next&&n.next(y)))},y=>{u=!1,n.error&&n.error(y),a.unsubscribe()})};return d(),a})},extendObservabilitySet:xs,getByKeyPath:fe,setByKeyPath:se,delByKeyPath:function Uo(e,n){"string"==typeof n?se(e,n,void 0):"length"in n&&[].map.call(n,function(t){se(e,t,void 0)})},shallowClone:Bi,deepClone:Xe,getObjectDiff:Kn,cmp:W,asap:Li,minKey:wn,addons:[],connections:lt,errnames:na,dependencies:Vn,semVer:"3.2.0",version:"3.2.0".split(".").map(e=>parseInt(e)).reduce((e,n,t)=>e+n/Math.pow(10,2*t))})),Be.maxKey=dt(Be.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Se(ct,e=>{if(!xe){let n;Bt?(n=document.createEvent("CustomEvent"),n.initCustomEvent(Ce,!0,!0,e)):n=new CustomEvent(Ce,{detail:e}),xe=!0,dispatchEvent(n),xe=!1}}),addEventListener(Ce,({detail:e})=>{xe||$t(e)}));let xe=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(Ce);Se(ct,n=>{xe||e.postMessage(n)}),e.onmessage=n=>{n.data&&$t(n.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Se(ct,n=>{try{xe||("undefined"!=typeof localStorage&&localStorage.setItem(Ce,JSON.stringify({trig:Math.random(),changedParts:n})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:Ce,changedParts:n})))}catch(t){}}),addEventListener("storage",n=>{if(n.key===Ce){const t=JSON.parse(n.newValue);t&&$t(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function vu({data:e}){e&&e.type===Ce&&$t(e.changedParts)})}_.rejectionMapper=function sa(e,n){if(!e||e instanceof je||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ji[e.name])return e;var t=new ji[e.name](n||e.message,e);return"stack"in e&&ge(t,"stack",{get:function(){return this.inner.stack}}),t},Ti(ae,is);let Au=(()=>{class e{constructor(){this.user={user:"",wins:0,losses:0,total:0},this.createDatabase()}createDatabase(){this.db=new Oe("GameDatabase"),this.db.version(1).stores({users:"user, wins, losses, total"})}readFromIndexedDb(){var t=this;return vt(function*(){return yield t.db.users.toArray()})()}addToIndexedDb(t){var i=this;this.db.users.put(t).then(vt(function*(){yield i.db.users.toArray()})).catch(s=>{console.log("Error: "+(s.stack||s))})}addUser(t){this.addToIndexedDb(t)}readUser(t){var i=this;return vt(function*(){return i.user={user:"",wins:0,losses:0,total:0},(yield i.readFromIndexedDb()).forEach(o=>{o.user===t&&(i.user=o)}),""===i.user.user&&(i.user.user=t),i.user})()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var wu=L(9224),_u=L(4834);function bu(e,n){if(1&e){const t=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){const r=l.CHM(t).$implicit;return l.oxw().game(r)}),l._UZ(1,"img",7),l.qZA()}if(2&e){const t=n.$implicit,i=l.oxw();l.Q6J("disabled",i.isCalling),l.xp6(1),l.MGl("src","assets/",t,".png",l.LSH)}}function Cu(e,n){if(1&e&&(l.TgZ(0,"h2"),l._uU(1),l.qZA()),2&e){const t=l.oxw();l.xp6(1),l.hij(" ",t.selectionMessage,"")}}const Su=[{path:"",component:$o,children:[{path:"game",component:(()=>{class e{constructor(t){this.gameService=t,this.userName=localStorage.getItem("userName")||"",this.user={user:"",wins:0,losses:0,total:0},this.selectionMessage="",this.message="",this.previousComputer="",this.computerSelection="",this.actualMatch="",this.choices=["Rock","Paper","Scissor"],this.isCalling=!1}ngOnInit(){var t=this;return vt(function*(){t.user=yield t.gameService.readUser(t.userName),t.saveGame()})()}selectedComputer(){let t="",i=0;if(0==this.previousComputer.length)i=Math.floor(Math.random()*this.choices.length),t=this.choices[i];else do{i=Math.floor(Math.random()*this.choices.length),t=this.choices[i]}while(this.previousComputer===t);return this.previousComputer=t,t}win(){this.user.wins++,this.message="You win!"}lose(){this.user.losses++,this.message="You lose!"}tie(){this.message="It's a tie!"}game(t){this.isCalling=!0,this.selectionMessage="USER: "+t+" - COMPUTER: ...",setTimeout(()=>{switch(this.computerSelection=this.selectedComputer(),this.selectionMessage="USER: "+t+" - COMPUTER: "+this.computerSelection,this.actualMatch=t+this.computerSelection,this.actualMatch){case"RockScissor":case"ScissorPaper":case"PaperRock":this.win();break;case"ScissorRock":case"RockPaper":case"PaperScissor":this.lose();break;default:this.tie()}this.user.total++,this.saveGame(),this.isCalling=!1},1e3)}saveGame(){this.gameService.addUser(this.user)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Au))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-game"]],decls:21,vars:6,consts:[["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center"],[1,"text"],[1,"userScore"],[1,"computerScore"],["mat-button","","class","choices",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-button","",1,"choices",3,"disabled","click"],[1,"icon",3,"src"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"mat-card",1),l.TgZ(2,"h1"),l._uU(3," SCORE: "),l.qZA(),l.TgZ(4,"h2"),l._uU(5,"User:"),l.TgZ(6,"strong",2),l._uU(7),l.qZA(),l._uU(8," Computer: "),l.TgZ(9,"strong",3),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l._UZ(11,"mat-divider"),l.TgZ(12,"div",0),l.YNc(13,bu,2,2,"button",4),l.qZA(),l._UZ(14,"mat-divider"),l.TgZ(15,"mat-card",1),l.YNc(16,Cu,2,1,"h2",5),l.TgZ(17,"h1"),l._uU(18),l.qZA(),l.TgZ(19,"h2"),l._uU(20),l.qZA(),l.qZA()),2&t&&(l.xp6(7),l.Oqu(i.user.wins),l.xp6(3),l.Oqu(i.user.losses),l.xp6(3),l.Q6J("ngForOf",i.choices),l.xp6(3),l.Q6J("ngIf",""!=i.selectionMessage),l.xp6(2),l.hij(" RESULT: ",i.message,""),l.xp6(2),l.hij("Games played: ",i.user.total,""))},directives:[hi,xi,wu.a8,_u.d,K.sg,Mi.lW,K.O5],styles:[".choices[_ngcontent-%COMP%]{margin:15px 20px;text-align:center}.choices[_ngcontent-%COMP%]:hover{background-color:#34369bbb}.choices[_ngcontent-%COMP%]:active{background-color:#2b2db6e5}.icon[_ngcontent-%COMP%]{max-width:80%}.text[_ngcontent-%COMP%]{width:80%;text-align:center;margin:1em auto}strong[_ngcontent-%COMP%]{margin:0 20px 0 10px}.userScore[_ngcontent-%COMP%]{color:#adff2f}.computerScore[_ngcontent-%COMP%]{color:red}"]}),e})()},{path:"**",redirectTo:"home"}]}];let Du=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[xt.Bz.forChild(Su)],xt.Bz]}),e})(),Fu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[K.ez,Po,Ko.q,Du]]}),e})()}}]);